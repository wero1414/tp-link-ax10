!function(l){l.su.moduleManager.define("quickSetupAp",{services:["moduleLoader","ajax","device","language","moduleManager"],deps:["main","navigatorController"],models:["language","quickSetupModel"],stores:["workModeStore","languageStore","quickSetupSteps"],views:["quickSetupApView"],listeners:{ev_on_launch:function(e,t,o,n,u,i,a){var t=this,s=a.device.getLocale();u.languageStore.load({success:function(){t.lang=s,n.language.language.setValue(s),o.quickSetupApView.qsLanBtn.setText(n.language.language.getText())}}),t.initMode(),n.quickSetupModel.load({ajax:{"async":!1},url:l.su.url("/admin/quick_setup?form=ap_setup")}),o.quickSetupApView.productName.setValue(a.device.getProductName()),u.quickSetupSteps.loadData(t.apSteps),this.goTo("qsWirelessSettingAp"),t.initModeSelectModule(),l.su.scrollbar({ele:".page-content-container"})}},init:function(o,t,e,n,u,i){this.configViews({id:"quickSetupApView"}),this.control({"#switch-mode-button":{ev_button_click:function(e){t.quickSetupApView.switchModeMsg.show()}},"#quit-qs-button":{ev_button_click:function(e){u.main.confirm(l.su.CHAR.QUICK_SETUP.QUIT_MSG1,function(){o.quit()},null,l.su.CHAR.QUICK_SETUP.QUIT_UPPER)}},"#qs-lan-cb":{ev_view_change:function(e,t){o.lang!==t.value&&i.language.switchTo(t.value)},mouseenter:function(){l("#qs-lan-button").addClass("hover")},mouseleave:function(){l("#qs-lan-button").removeClass("hover")}},".operation-mode-switch-msg":{ev_msg_ok:function(e,t){var o=i.moduleManager.get("operationMode");o.modeChanged()&&(o.switchModeConfirm(),t.preventDefault())}}})}},function(n,t,e,o,u,i){var n=this,a=[],s="router",r="ap";return{mode:null,initMode:function(){switch(n.mode=i.device.getCurrentMode(),n.mode){case s:n.steps=n.routerSteps;case r:n.steps=n.apSteps}},steps:null,routerSteps:[{name:"qsSetTimezone"},{name:"qsChooseInternetType"},{name:"qsInternetEdit"},{name:"qsWirelessSetting"},{name:"qsSummary"},{name:"tpCloudService"}],apSteps:[{name:"qsWirelessSettingAp"},{name:"qsSummaryAp"}],updateSteps:function(o){l.each(n.steps,function(e,t){t&&t.name===o&&n.setStep(o)})},currentStep:null,_getChildModuleLoader:function(e){return t.quickSetupApView[e+"Loader"]},setStep:function(e){t.quickSetupApView.steps.setValue(e)},initModeSelectModule:function(){i.moduleLoader.load({module:"quickSetupAp"},{module:"operationMode",view:"operationModeViewQs"},t.quickSetupApView.operationModeLoader)},goTo:function(e,t){n.currentStep&&n._getChildModuleLoader(n.currentStep).hide();var o=n._getChildModuleLoader(e);0<=l.inArray(e,a)&&!t||(i.moduleLoader.load({module:"quickSetupAp"},{module:e},o),0<=l.inArray(e,a))||a.push(e),o.show(),n.currentStep=e,n.updateSteps(e)},quit:function(){u.navigatorController.goTo("index")}}})}(jQuery);