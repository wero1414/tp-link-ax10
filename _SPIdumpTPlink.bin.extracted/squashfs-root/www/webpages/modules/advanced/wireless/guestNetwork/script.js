!function(g){g.su.moduleManager.define("guestNetworkAdv",{services:["moduleLoader","moduleManager","ajax","device","vtype"],models:["guestPermissionAdv","portalAuthCfg"],stores:["guest2g5gEncryptionStore","securityStore","portalAuthTypeStore","portalAuthDurationStore"],views:["guestNetworkAdvView"],listeners:{ev_on_launch:function(e,t,o,n,a,s,r){n.guestPermissionAdv.load({success:function(e){"ap"===r.device.getCurrentMode()&&n.guestPermissionAdv.accessLocal.hide()}}),r.moduleLoader.load({module:"guestNetworkAdv"},{module:"guestNetworkModule"},o.guestNetworkAdvView.guestNetworkModuleLoader),o.guestNetworkAdvView.guestNetworkNote.hide()}},init:function(e,t,o,n,a,s){}},function(e,r,t,o,n,u){return{preView:function(e,t){e=e.files[0];if(!e)return!1;var o=new FileReader;o.readAsDataURL(e),o.onload=function(e){"logo-imge"==t&&(r.guestNetworkAdvView.portalLoginPreview.changeLogo(this.result),localStorage.logo=this.result),"background-imge"==t&&(r.guestNetworkAdvView.portalLoginPreview.changeBackground(this.result),localStorage.background=this.result)}},showNote:function(e,t,o,n,a){var s=u.moduleManager.get("guestNetworkModule");switch(0===e.disabledBy?r.guestNetworkAdvView.guestNetworkNote.setText(g.su.CHAR.GUEST_NETWORK.SWITCH_NOTICE1):r.guestNetworkAdvView.guestNetworkNote.setText(g.su.CHAR.GUEST_NETWORK.SWITCH_NOTICE2),t){case"24G":o=e.disabled;break;case"51G":n=e.disabled;break;case"52G":a=e.disabled}u.device.getIsTriband()?"on"===o&&"on"===n&&"on"===a?(r.guestNetworkAdvView.guestNetworkNote.show(),s.diableEncryption()):(r.guestNetworkAdvView.guestNetworkNote.hide(),s.enableEncryption()):"on"===o&&"on"===n?(r.guestNetworkAdvView.guestNetworkNote.show(),s.diableEncryption()):(r.guestNetworkAdvView.guestNetworkNote.hide(),s.enableEncryption())}}})}(jQuery),function(s){s.su.modelManager.define("guestNetwork",{type:"model",fields:[{name:"guest2gEnable",mapping:"guest_2g_enable"},{name:"guest2gSSID",mapping:"guest_2g_ssid",allowBlank:!1,vtype:{vtype:"string_visible_allow_blank"},maxLength:32},{name:"guest2gHidden",mapping:"guest_2g_hidden"},{name:"guest5gEnable",mapping:"guest_5g_enable"},{name:"guest5gSSID",mapping:"guest_5g_ssid",allowBlank:!1,vtype:{vtype:"string_visible_allow_blank"},maxLength:32},{name:"guest5gHidden",mapping:"guest_5g_hidden"},{name:"guest5g2Enable",mapping:"guest_5g_2_enable"},{name:"guest5g2SSID",mapping:"guest_5g_2_ssid",allowBlank:!1,vtype:{vtype:"string_visible_allow_blank"},maxLength:32},{name:"guest5g2Hidden",mapping:"guest_5g_2_hidden"},{name:"guest6gEnable",mapping:"guest_6g_enable"},{name:"guest6gSSID",mapping:"guest_6g_ssid",allowBlank:!1,vtype:{vtype:"string_visible_allow_blank"},maxLength:32},{name:"guest6gHidden",mapping:"guest_6g_hidden"},{name:"guest2g5gEncryption",mapping:"guest_2g5g_encryption"},{name:"guest2g5gPskVersion",mapping:"guest_2g5g_psk_version"},{name:"guest2g5gPskKey",mapping:"guest_2g5g_psk_key",allowBlank:!1,vtype:"psk_password"},{name:"guest2gEncryption",mapping:"guest_2g_encryption",defaultValue:"none"},{name:"guest2gPskVersion",mapping:"guest_2g_psk_version"},{name:"guest2gPskKey",mapping:"guest_2g_psk_key",vtype:"psk_password"},{name:"guest5gEncryption",mapping:"guest_5g_encryption",defaultValue:"none"},{name:"guest5gPskVersion",mapping:"guest_5g_psk_version"},{name:"guest5gPskKey",mapping:"guest_5g_psk_key",vtype:"psk_password"},{name:"guest5g2Encryption",mapping:"guest_5g_2_encryption",defaultValue:"none"},{name:"guest5g2PskVersion",mapping:"guest_5g_2_psk_version"},{name:"guest5g2PskKey",mapping:"guest_5g_2_psk_key",vtype:"psk_password"},{name:"guest6gEncryption",mapping:"guest_6g_encryption",defaultValue:"psk_sae"},{name:"guest6gPskVersion",mapping:"guest_6g_psk_version"},{name:"guest6gPskKey",mapping:"guest_6g_psk_key",vtype:"psk_password"},{name:"guest2g5gAuthenticationType",mapping:"guest_2g5g_authentication_type",defaultValue:"none",allowBlank:!1},{name:"guest2g5gPortalPassword",mapping:"guest_2g5g_portal_password",vtype:{vtype:"portal_password"}},{name:"guest2g5gAuthenticationTimeout",mapping:"guest_2g5g_authentication_timeout",defaultValue:"always"},{name:"guest2g5gRedirect",mapping:"guest_2g5g_redirect",defaultValue:"off"},{name:"guest2g5gRedirectUrl",mapping:"guest_2g5g_redirect_url",vtype:{vtype:"portal_domain_name"}},{name:"supportWifi6E",defaultValue:!1}],validator:function(){return 1!=this.guest2g5gAuthenticationType.disabled&&"simple"==this.guest2g5gAuthenticationType.getValue()&&""==this.guest2g5gPortalPassword.getValue()?(this.guest2g5gPortalPassword.setValid(!1,s.su.CHAR.VTYPETEXT.BLANKTEXT),!1):1==this.guest2g5gRedirect.disabled||"on"!=this.guest2g5gRedirect.getValue()||""!=this.guest2g5gRedirectUrl.getValue()||(this.guest2g5gRedirectUrl.setValid(!1,s.su.CHAR.VTYPETEXT.BLANKTEXT),!1)},serialize:function(e){return e.supportWifi6E?("none"==e.guest_2g5g_encryption?(e.guest_6g_encryption="owe",e.guest_6g_psk_version="owe_only"):"psk_sae"==e.guest_2g5g_encryption?(e.guest_6g_encryption=e.guest_2g5g_encryption,e.guest_6g_psk_version="sae_only"):(e.guest_6g_encryption=e.guest_2g5g_encryption,e.guest_6g_psk_version=e.guest_2g5g_psk_version),e.guest_2g_encryption=e.guest_2g5g_encryption,e.guest_5g_encryption=e.guest_2g5g_encryption,e.guest_5g_2_encryption=e.guest_2g5g_encryption,e.guest_2g_psk_version=e.guest_2g5g_psk_version,e.guest_5g_psk_version=e.guest_2g5g_psk_version,e.guest_5g_2_psk_version=e.guest_2g5g_psk_version,e.guest_2g_psk_key=e.guest_2g5g_psk_key,e.guest_5g_psk_key=e.guest_2g5g_psk_key,e.guest_5g_2_psk_key=e.guest_2g5g_psk_key,e.guest_6g_psk_key=e.guest_2g5g_psk_key,delete e.guest_2g5g_encryption,delete e.guest_2g5g_psk_version,delete e.guest_2g5g_psk_key):(delete e.guest_2g_encryption,delete e.guest_2g_psk_version,delete e.guest_2g_psk_key,delete e.guest_5g_encryption,delete e.guest_5g_psk_version,delete e.guest_5g_psk_key,delete e.guest_5g_2_encryption,delete e.guest_5g_2_psk_version,delete e.guest_5g_2_psk_key,delete e.guest_6g_encryption,delete e.guest_6g_psk_version,delete e.guest_6g_psk_key),delete e.supportWifi6E,e},proxy:{url:s.su.url("/admin/wireless?form=guest_2g&form=guest_5g&form=guest_5g_2&form=guest_2g5g")}}),s.su.storeManager.define("guest2g5gEncryptionStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[]}),s.su.storeManager.define("guestSecurityStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:s.su.CHAR.COMBOBOX.NO_SECURITY,value:0},{name:s.su.CHAR.COMBOBOX.WPA_WPA2_PERSONAL,value:1}]}),s.su.storeManager.define("durationStore",{fields:[{name:"name"},{name:"value"},{name:"boxlabel"}],data:[{name:s.su.CHAR.COMBOBOX.ALWAYS,value:0,boxlabel:s.su.CHAR.COMBOBOX.ALWAYS},{name:s.su.CHAR.COMBOBOX.ONE_DAY,value:1,boxlabel:s.su.CHAR.COMBOBOX.ONE_DAY},{name:s.su.CHAR.COMBOBOX.EIGHT_HOURS,value:2,boxlabel:s.su.CHAR.COMBOBOX.EIGHT_HOURS},{name:s.su.CHAR.COMBOBOX.FOUR_HOURS,value:3,boxlabel:s.su.CHAR.COMBOBOX.FOUR_HOURS},{name:s.su.CHAR.COMBOBOX.ONE_HOUR,value:4,boxlabel:s.su.CHAR.COMBOBOX.ONE_HOUR}]}),s.su.modelManager.define("guestPermissionAdv",{type:"model",fields:[{name:"isolate"},{name:"accessLocal",mapping:"access_local"}],convert:function(e){var t={};return t.isolate=e.isolate||"off",t.access_local=e.access||"off",t},serialize:function(e){var t=s.extend({},e);return t.access=e.access_local,delete t.access_local,t},proxy:{url:s.su.url("/admin/wireless?form=guest")}}),s.su.storeManager.define("portalAuthTypeStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"boxlabel"}],data:[{name:s.su.CHAR.COMBOBOX.NO_AUTHENTICATION,value:"none",boxlabel:s.su.CHAR.COMBOBOX.NO_AUTHENTICATION},{name:s.su.CHAR.COMBOBOX.SIMPLE_PASSWORD,value:"simple",boxlabel:s.su.CHAR.COMBOBOX.SIMPLE_PASSWORD}]}),s.su.storeManager.define("portalAuthDurationStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"boxlabel"}],data:[{name:s.su.CHAR.COMBOBOX.ONE_HOUR,value:"1hours",boxlabel:s.su.CHAR.COMBOBOX.ONE_HOUR},{name:s.su.CHAR.COMBOBOX.TWO_HOURS,value:"2hours",boxlabel:s.su.CHAR.COMBOBOX.TWO_HOURS},{name:s.su.CHAR.COMBOBOX.FOUR_HOURS,value:"4hours",boxlabel:s.su.CHAR.COMBOBOX.FOUR_HOURS},{name:s.su.CHAR.COMBOBOX.EIGHT_HOURS,value:"8hours",boxlabel:s.su.CHAR.COMBOBOX.EIGHT_HOURS},{name:s.su.CHAR.COMBOBOX.ALWAYS,value:"always",boxlabel:s.su.CHAR.COMBOBOX.ALWAYS}]}),s.su.modelManager.define("portalAuthCfg",{type:"model",fields:[{name:"title",maxLength:32,convert:function(e,t){return n(e)},serialize:function(e,t){return o(e)}},{name:"content",maxLength:200,convert:function(e,t){return n(e)},serialize:function(e,t){return o(e)}},{name:"titleColorPicker"},{name:"themeColorPicker"},{name:"checkContent"},{name:"logoBrowseId"},{name:"backgroundBrowseId"},{name:"fontColor",mapping:"font_color",serialize:function(e,t){return s.su.rgbToHexString(t.titleColorPicker)}},{name:"themeColor",mapping:"theme_color",serialize:function(e,t){return s.su.rgbToHexString(t.themeColorPicker)}},{name:"fontOpacity",mapping:"font_opacity",serialize:function(e,t){var o=100;return t.titleColorPicker?"object"==typeof t.titleColorPicker&&"number"==typeof t.titleColorPicker.a?100*t.titleColorPicker.a:o:undefined}},{name:"themeOpacity",mapping:"theme_opacity",serialize:function(e,t){var o=100;return t.themeColorPicker?"object"==typeof t.themeColorPicker&&"number"==typeof t.themeColorPicker.a?100*t.themeColorPicker.a:o:undefined}}],validator:function(){return 1==this.content.disabled||"on"!=this.checkContent.getValue()||""!=this.content.getValue()||(this.content.setValid(!1,s.su.CHAR.VTYPETEXT.BLANKTEXT),!1)},convert:function(e){function t(e,t){return e&&t?((e=s.su.hexToRgb(e)).a=t/100,e):null}return""==e.font_color&&""==e.theme_color&&(e.title=s.su.CHAR.GUEST_NETWORK.WELCOME,e.content=s.su.CHAR.GUEST_NETWORK.TERMS_OF_USE_NOTE),e.content?e.checkContent="on":e.checkContent="off",e.content==undefined&&(e.checkContent="on"),e.titleColorPicker=t(e.font_color||"FFFFFF",e.font_opacity||100),delete e.font_color,delete e.font_opacity,e.themeColorPicker=t(e.theme_color||"4ACBD6",e.theme_opacity||100),delete e.theme_color,delete e.theme_opacity,e},serialize:function(e){return"off"==e.checkContent&&(e.content=""),delete e.backgroundBrowseId,delete e.logoBrowseId,delete e.checkContent,delete e.themeColorPicker,delete e.titleColorPicker,e},proxy:{url:s.su.url("/admin/wireless?form=portal_content")}}),s.su.define("portalLogoReadProxy",{extend:"IPFProxy",url:s.su.url("/admin/wifidog?form=portal_logo"),readFilter:function(e){return{data:JSON.parse(s.su.encryptor.dataDecrypt(e.data))}}}),s.su.define("portalBackgroundReadProxy",{extend:"IPFProxy",url:s.su.url("/admin/wifidog?form=portal_background"),readFilter:function(e){return{data:JSON.parse(s.su.encryptor.dataDecrypt(e.data))}}}),s.su.define("portalLogoUploadProxy",{extend:"IPFProxy",api:{upload:{preventSuccessEvent:!0,preventFailEvent:!0,preventErrorEvent:!0,url:s.su.url("/admin/wifidog?form=portal_logo"),writeFilter:function(e){return s.extend({operation:"upload"},e)}}}}),s.su.define("portalBackgroundUploadProxy",{extend:"IPFProxy",api:{upload:{preventSuccessEvent:!0,preventFailEvent:!0,preventErrorEvent:!0,url:s.su.url("/admin/wifidog?form=portal_background"),writeFilter:function(e){return s.extend({operation:"upload"},e)}}}}),s.su.define("folderSharingGuestProxy",{extend:"IPFProxy",url:s.su.url("/admin/folder_sharing?form=guest")}),s.su.define("wireless2gProxy",{extend:"IPFProxy",url:s.su.url("/admin/wireless?form=wireless_2g"),readFilter:function(e){return{enable:e.data.enable,disabled:e.data.disabled,disabledAll:e.data.disabled_all,disabledBy:e.data.disabled_by,extinfo:{wdsGuestCompatible:e.data.extinfo&&e.data.extinfo.wds_guest_compatible}}}}),s.su.define("wireless2gParameterProxy",{extend:"IPFProxy",url:s.su.url("/admin/wireless?form=syspara_2g"),readFilter:function(e){return{enable:e.data.enable}}}),s.su.define("wireless5gProxy",{extend:"IPFProxy",url:s.su.url("/admin/wireless?form=wireless_5g"),readFilter:function(e){return{enable:e.data.enable,disabled:e.data.disabled,disabledAll:e.data.disabled_all,disabledBy:e.data.disabled_by,extinfo:{wdsGuestCompatible:e.data.extinfo&&e.data.extinfo.wds_guest_compatible}}}}),s.su.define("wireless5gParameterProxy",{extend:"IPFProxy",url:s.su.url("/admin/wireless?form=syspara_5g"),readFilter:function(e){return{enable:e.data.enable}}}),s.su.define("wireless5g2Proxy",{extend:"IPFProxy",url:s.su.url("/admin/wireless?form=wireless_5g_2"),readFilter:function(e){return{enable:e.data.enable,disabled:e.data.disabled,disabledAll:e.data.disabled_all,disabledBy:e.data.disabled_by,extinfo:{wdsGuestCompatible:e.data.extinfo&&e.data.extinfo.wds_guest_compatible}}}}),s.su.define("wireless5g2ParameterProxy",{extend:"IPFProxy",url:s.su.url("/admin/wireless?form=syspara_5g_2"),readFilter:function(e){return{enable:e.data.enable}}}),s.su.define("wireless6gProxy",{extend:"IPFProxy",url:s.su.url("/admin/wireless?form=wireless_6g"),readFilter:function(e){return{enable:e.data.enable,disabled:e.data.disabled,disabledAll:e.data.disabled_all,disabledBy:e.data.disabled_by,extinfo:{wdsGuestCompatible:e.data.extinfo&&e.data.extinfo.wds_guest_compatible}}}}),s.su.define("wireless6gParameterProxy",{extend:"IPFProxy",url:s.su.url("/admin/wireless?form=syspara_6g"),readFilter:function(e){return{enable:e.data.enable}}}),s.su.storeManager.define("bandwidthCtrlUnitStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"selected"}],data:[{name:s.su.CHAR.COMBOBOX.MBPS,value:"mbps",selected:!0},{name:s.su.CHAR.COMBOBOX.KBPS,value:"kbps"}]}),s.su.modelManager.define("bandwidthCtrlModel",{type:"model",fields:[{name:"enable_2g"},{name:"down_band_2g",vtype:{vtype:"integer",min:1,max:1e3},valueType:"number"},{name:"up_band_2g",vtype:{vtype:"integer",min:1,max:1e3},valueType:"number"},{name:"enable_5g1"},{name:"down_band_5g1",vtype:{vtype:"integer",min:1,max:1e3},valueType:"number"},{name:"up_band_5g1",vtype:{vtype:"integer",min:1,max:1e3},valueType:"number"},{name:"enable_5g2"},{name:"down_band_5g2",vtype:{vtype:"integer",min:1,max:1e3},valueType:"number"},{name:"up_band_5g2",vtype:{vtype:"integer",min:1,max:1e3},valueType:"number"},{name:"enable_6g"},{name:"down_band_6g",vtype:{vtype:"integer",min:1,max:1e3},valueType:"number"},{name:"up_band_6g",vtype:{vtype:"integer",min:1,max:1e3},valueType:"number"}],validator:function(){return 1!=this.enable_2g.disabled&&"on"==this.enable_2g.getValue()&&""==this.down_band_2g.getValue()&&""==this.up_band_2g.getValue()?(this.down_band_2g.setValid(!1,s.su.CHAR.VTYPETEXT.BLANKTEXT),this.up_band_2g.setValid(!1,s.su.CHAR.VTYPETEXT.BLANKTEXT),!1):1!=this.enable_5g1.disabled&&"on"==this.enable_5g1.getValue()&&""==this.down_band_5g1.getValue()&&""==this.up_band_5g1.getValue()?(this.down_band_5g1.setValid(!1,s.su.CHAR.VTYPETEXT.BLANKTEXT),this.up_band_5g1.setValid(!1,s.su.CHAR.VTYPETEXT.BLANKTEXT),!1):1!=this.enable_5g2.disabled&&"on"==this.enable_5g2.getValue()&&""==this.down_band_5g2.getValue()&&""==this.up_band_5g2.getValue()?(this.down_band_5g2.setValid(!1,s.su.CHAR.VTYPETEXT.BLANKTEXT),this.up_band_5g2.setValid(!1,s.su.CHAR.VTYPETEXT.BLANKTEXT),!1):1==this.enable_6g.disabled||"on"!=this.enable_6g.getValue()||""!=this.down_band_6g.getValue()||""!=this.up_band_6g.getValue()||(this.down_band_6g.setValid(!1,s.su.CHAR.VTYPETEXT.BLANKTEXT),this.up_band_6g.setValid(!1,s.su.CHAR.VTYPETEXT.BLANKTEXT),!1)},convert:function(e){function t(e){return e<=0?"":(e/1024).toFixed(0)}return e.up_band_2g=t(e.up_band_2g),e.down_band_2g=t(e.down_band_2g),e.up_band_5g1=t(e.up_band_5g1),e.down_band_5g1=t(e.down_band_5g1),e.up_band_5g2=t(e.up_band_5g2),e.down_band_5g2=t(e.down_band_5g2),e.up_band_6g=t(e.up_band_6g),e.down_band_6g=t(e.down_band_6g),e},serialize:function(o){function e(e,t){if("on"===o["enable_"+e])return 1024*t||""}return o.up_band_2g=e("2g",o.up_band_2g),o.down_band_2g=e("2g",o.down_band_2g),o.up_band_5g1=e("5g1",o.up_band_5g1),o.down_band_5g1=e("5g1",o.down_band_5g1),o.up_band_5g2=e("5g2",o.up_band_5g2),o.down_band_5g2=e("5g2",o.down_band_5g2),o.up_band_6g=e("6g",o.up_band_6g),o.down_band_6g=e("6g",o.down_band_6g),o},proxy:{url:s.su.url("/admin/wireless?form=guestnetwork_bandwidth_ctrl")}}),s.su.storeManager.define("accessTimeTypeStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"selected"}],data:[{name:s.su.CHAR.GUEST_NETWORK.NO_LIMIT,value:"none",selected:!0},{name:s.su.CHAR.GUEST_NETWORK.HOUR_4,value:"4hours"},{name:s.su.CHAR.GUEST_NETWORK.DAY_1,value:"1day"},{name:s.su.CHAR.GUEST_NETWORK.CUSTOM,value:"custom"}]}),s.su.modelManager.define("accessTimeModel",{type:"model",fields:[{name:"type"},{name:"day",validator:function(e,t){return"custom"!=t.type.getValue()||0!=e||0!=t.hour.getValue()||0!=t.min.getValue()}},{name:"hour",validator:function(e,t){return"custom"!=t.type.getValue()||0!=e||0!=t.day.getValue()||0!=t.min.getValue()}},{name:"min",validator:function(e,t){return"custom"!=t.type.getValue()||0!=e||0!=t.day.getValue()||0!=t.hour.getValue()}},{name:"remain_time"},{name:"effective_time"},{name:"int_time"}],autoReload:!0,convert:function(e){e.int_time=e.remain_time,e.day=0,e.hour=0,(e.min=0)<e.effective_time&&(e.day=Math.floor(e.effective_time/1440),e.hour=Math.floor(e.effective_time%1440/60),e.min=e.effective_time%60);var t="",o=0,n=0,a=0;return 0<e.remain_time&&(o=Math.floor(e.remain_time/1440),n=Math.floor(e.remain_time%1440/60),a=e.remain_time%60),0<o&&(t=(t+=o+" ")+(1<o?s.su.CHAR.GUEST_NETWORK.DAYS:s.su.CHAR.GUEST_NETWORK.DAY)+" "),t=(t=0<n?(t+=n+" ")+(1<n?s.su.CHAR.GUEST_NETWORK.HOURS:s.su.CHAR.GUEST_NETWORK.HOUR)+" ":t)+(a+" ")+(1==a?s.su.CHAR.GUEST_NETWORK.MINUTE:s.su.CHAR.GUEST_NETWORK.MINUTES),e.remain_time=t,e},serialize:function(e){switch(e.type){case"none":e.effective_time=-1;break;case"4hours":e.effective_time=240;break;case"1day":e.effective_time=1440;break;case"custom":e.effective_time=60*parseInt(e.day)*24+60*parseInt(e.hour)+parseInt(e.min)}return delete e.day,delete e.hour,delete e.min,delete e.remain_time,delete e.int_time,e},proxy:{url:s.su.url("/admin/wireless?form=guestnetwork_effectivetime_ctrl")}}),s.su.storeManager.define("accessTimeDayStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"selected"}]}),s.su.storeManager.define("accessTimeHourStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"selected"}]}),s.su.storeManager.define("accessTimeMinStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"selected"}]});var o=function(e){e=e.toString();return e=(e=(e=(e=(e=(e=(e=e.replace(/\&/g,"&amp;")).replace(/\</g,"&lt;")).replace(/\>/g,"&gt;")).replace(/\"/g,"&quot;")).replace(/[ \f\r\t\v]/g,"&nbsp;")).replace(/\n/g,"&#10;")).replace(/\\/g,"\\\\")},n=function(e){e=e.toString();return e=(e=(e=(e=(e=(e=(e=e.replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&quot;/g,'"')).replace(/&nbsp;/g," ")).replace(/&#10;/g,"\n")).replace(/\\\\/g,"\\")}}(jQuery),function(i){i.su.moduleManager.define("guestNetworkModule",{services:["moduleManager","ajax","device","vtype","timer"],models:["guestNetwork","portalAuthCfg","bandwidthCtrlModel","accessTimeModel"],stores:["guest2g5gEncryptionStore","securityStore","portalAuthTypeStore","portalAuthDurationStore","accessTimeTypeStore","accessTimeDayStore","accessTimeHourStore","accessTimeMinStore"],views:["guestNetworkModuleView"],listeners:{ev_on_launch:function(e,a,s,r,t,o,u){var n=(a=this).supportWifi6E?[{name:i.su.CHAR.COMBOBOX.NO_SECURITY,value:"none"},{name:i.su.CHAR.COMBOBOX.ENCRYPTED,value:"psk_sae"}]:[{name:i.su.CHAR.COMBOBOX.NO_SECURITY,value:"none"},{name:i.su.CHAR.COMBOBOX.WPA_WPA2_PERSONAL,value:"psk"},{name:i.su.CHAR.COMBOBOX.WPA2_WPA3_PERSONAL,value:"psk_sae"}];u.device.getConfig().supportPortal&&(n.push({name:i.su.CHAR.COMBOBOX.PORTAL,value:"portal"}),r.portalAuthCfg.backgroundBrowseId.setFileNote(i.su.CHAR.GUEST_NETWORK.BACKGROUND_IMAGE_NOTE.replace("2","1"))),u.device.getConfig().supportPortalImage&&!i.su.isIe9or8()||(r.portalAuthCfg.backgroundBrowseId.hide(),r.portalAuthCfg.logoBrowseId.hide()),t.guest2g5gEncryptionStore.loadData(n),a.isTriband||a.supportWifi6E?!a.isTriband&&a.supportWifi6E?(r.guestNetwork.setProxyUrl(i.su.url("/admin/wireless?form=guest_2g&form=guest_5g&form=guest_6g&form=guest_2g5g")),r.guestNetwork.supportWifi6E.setValue(!0)):a.isTriband&&a.supportWifi6E&&(r.guestNetwork.setProxyUrl(i.su.url("/admin/wireless?form=guest_2g&form=guest_5g&form=guest_5g_2&form=guest_6g&form=guest_2g5g")),r.guestNetwork.supportWifi6E.setValue(!0)):r.guestNetwork.setProxyUrl(i.su.url("/admin/wireless?form=guest_2g&form=guest_5g&form=guest_2g5g")),a.isTriband||(s.guestNetworkModuleView.guestNetworkAdv5g2Fieldset.hide(),r.guestNetwork.guest5gEnable.setLabelField(i.su.CHAR.GUEST_NETWORK.GHZ5)),a.supportWifi6E||s.guestNetworkModuleView.guestNetworkAdv6gFieldset.hide(),s.guestNetworkModuleView.guestNetworkAdv24gContent.hide(),s.guestNetworkModuleView.guestNetworkAdv5g1Content.hide(),s.guestNetworkModuleView.guestNetworkAdv5g2Content.hide(),s.guestNetworkModuleView.guestNetworkAdv6gContent.hide(),s.guestNetworkModuleView.wpaCfgContent.hide(),s.guestNetworkModuleView.portalCfgContent.hide(),this.control({".index-common-save-btn":{ev_will_auto_save:function(e,t){"portal"==r.guestNetwork.guest2g5gEncryption.getValue()&&firstSelectPortal&&r.guestNetwork.validate()&&r.portalAuthCfg.load({success:function(){r.portalAuthCfg.getData().title||r.portalAuthCfg.title.setValue(i.su.CHAR.GUEST_NETWORK.WELCOME),r.portalAuthCfg.submit({preventSuccessEvent:!0,success:function(){firstSelectPortal=!1}})}})}},"#login-page-edit-btn":{ev_button_click:function(e){a.portalResetFlag=!1,a.resetPortalLoginPageImgInput(),"simple"==r.guestNetwork.guest2g5gAuthenticationType.getValue()?s.guestNetworkModuleView.portalLoginPreview.showPassword():s.guestNetworkModuleView.portalLoginPreview.hidePassword(),s.guestNetworkModuleView.loginPageEditMsg.show(),s.guestNetworkModuleView.loginPageEditMsg.setScrollToTop(),a.getPortalLoginPageInfo()}},"#restore-default-image":{click:function(e){a.portalResetFlag=!0,r.portalAuthCfg.title.setValue(i.su.CHAR.GUEST_NETWORK.WELCOME),r.portalAuthCfg.checkContent.setValue("off"),r.portalAuthCfg.content.setValue(i.su.CHAR.GUEST_NETWORK.TERMS_OF_USE_NOTE),r.portalAuthCfg.titleColorPicker.setValue({r:255,g:255,b:255,a:1}),r.portalAuthCfg.themeColorPicker.setValue({r:74,g:203,b:214,a:1}),a.resetPortalLoginPageImgInput(),s.guestNetworkModuleView.portalLoginPreview.restoreDefault()}},"#full-screen-preview":{ev_button_click:function(e){window.open("./portalPreview.html")}},"#s-full-screen-preview":{ev_button_click:function(e){window.open("./portalPreview.html")}},"#logo-browse":{ev_file_change:function(e,t){var o;return r.portalAuthCfg.logoBrowseId.setNormal(),100<r.portalAuthCfg.logoBrowseId.getFileSize()?(r.portalAuthCfg.logoBrowseId.setError(i.su.CHAR.GUEST_NETWORK.FILE_SIZE_EXCEEDED),r.portalAuthCfg.logoBrowseId.resetFile(),!1):(o=r.portalAuthCfg.logoBrowseId.getFileName(),1!=u.vtype.validate(o,{vtype:"string_file",extension:["png","jpg"]})?(r.portalAuthCfg.logoBrowseId.setError(i.su.CHAR.ERROR["00000257"]),r.portalAuthCfg.logoBrowseId.resetFile(),!1):void a.preView(r.portalAuthCfg.logoBrowseId.getFile(),"logo-imge"))}},"#background-browse .file-button":{click:function(e){i.su.isIe9or8()||(e.stopPropagation(),e.preventDefault(),s.guestNetworkModuleView.backgroundBrowse.dom().find(".file-button").trigger("click"))}},"#background-preview":{ev_img_change:function(e,t){r.portalAuthCfg.backgroundBrowseId.setFileText(t),r.portalAuthCfg.backgroundBrowseId.setNormal(),s.guestNetworkModuleView.backgroundBrowse.dom().show().css("display","inline-block")},ev_img_resize:function(){var e=s.guestNetworkModuleView.backgroundBrowse.drawSltImg().toDataURL("image/png");s.guestNetworkModuleView.portalLoginPreview.changeBackground(e)},ev_img_size_error:function(e){r.portalAuthCfg.backgroundBrowseId.setError(i.su.CHAR.GUEST_NETWORK.FILE_SIZE_EXCEEDED),r.portalAuthCfg.backgroundBrowseId.setFileText("")},ev_img_type_error:function(e){r.portalAuthCfg.backgroundBrowseId.setError(i.su.CHAR.ERROR["00000257"]),r.portalAuthCfg.backgroundBrowseId.setFileText("")}},"#login-page-edit-msg":{ev_msg_ok:function(e,t){var o,n;r.portalAuthCfg.validate()?(o=i.Deferred(),n=i.Deferred(),s.guestNetworkModuleView.backgroundBrowse.getImageData().then(function(e){var t;e&&e.blob?((t=new FormData).append("background",e.blob,"portal.jpg"),t.append("operation","upload"),i.ajax({url:i.su.url("/admin/wifidog?form=portal_background"),type:"POST",data:t,dataType:"json",contentType:!1,processData:!1,preventSuccessEvent:!0,success:function(e){o.resolve()},fail:function(e){o.resolve()},error:function(e){o.resolve()}})):a.portalResetFlag?a.sendDefaultPortalLoginPageBackImg(function(){o.resolve()}):o.resolve()}),r.portalAuthCfg.logoBrowseId.getFileValue()?u.ajax.upload({proxy:"portalLogoUploadProxy",fileId:"logo-browse",timeout:72e4,success:function(e){n.resolve()},fail:function(e){n.resolve()},error:function(e){n.resolve()}}):(a.portalResetFlag&&a.sendDefaultPortalLoginPageLogoImg(function(){n.resolve()}),n.resolve()),i.when(o,n).then(function(){r.portalAuthCfg.submit({success:function(){s.guestNetworkModuleView.loginPageEditMsg.hide()}})})):t.preventDefault()}}}),this.listen({"models.guestNetwork.guest2g5gAuthenticationType":{ev_value_change:function(e,t,o){"none"==t?(s.guestNetworkModuleView.portalAuthTypeSimple.show(),r.guestNetwork.guest2g5gPortalPassword.disable(),r.guestNetwork.guest2g5gPortalPassword.hide()):"simple"==t?(s.guestNetworkModuleView.portalAuthTypeSimple.show(),r.guestNetwork.guest2g5gPortalPassword.enable(),r.guestNetwork.guest2g5gPortalPassword.show()):s.guestNetworkModuleView.portalAuthTypeSimple.hide()}},"models.portalAuthCfg.title":{ev_value_change:function(e,t,o){s.guestNetworkModuleView.portalLoginPreview.setTitle(t)}},"models.portalAuthCfg.content":{ev_value_change:function(e,t,o){s.guestNetworkModuleView.portalLoginPreview.setTermsOfUse(t)}},"models.guestNetwork.guest2g5gRedirect":{ev_value_change:function(e,t,o){"on"==t?(r.guestNetwork.guest2g5gRedirectUrl.enable(),r.guestNetwork.guest2g5gRedirectUrl.show()):(r.guestNetwork.guest2g5gRedirectUrl.disable(),r.guestNetwork.guest2g5gRedirectUrl.hide())}},"models.guestNetwork.guest2gEnable":{ev_value_change:function(e,t,o){"off"==t?(s.guestNetworkModuleView.guestNetworkAdv24gContent.hide(),s.guestNetworkModuleView.bandwidth2gBlock.hide()):(s.guestNetworkModuleView.guestNetworkAdv24gContent.show(),a.supportBandwidthConfig()&&s.guestNetworkModuleView.bandwidth2gBlock.show()),a.setEffectiveTimeStatus()}},"models.guestNetwork.guest5gEnable":{ev_value_change:function(e,t,o){"off"==t?(s.guestNetworkModuleView.guestNetworkAdv5g1Content.hide(),s.guestNetworkModuleView.bandwidth5gBlock.hide()):(s.guestNetworkModuleView.guestNetworkAdv5g1Content.show(),a.supportBandwidthConfig()&&s.guestNetworkModuleView.bandwidth5gBlock.show()),a.setEffectiveTimeStatus()}},"models.guestNetwork.guest5g2Enable":{ev_value_change:function(e,t,o){"off"==t?(s.guestNetworkModuleView.guestNetworkAdv5g2Content.hide(),s.guestNetworkModuleView.bandwidth5g2Block.hide()):(s.guestNetworkModuleView.guestNetworkAdv5g2Content.show(),a.supportBandwidthConfig()&&s.guestNetworkModuleView.bandwidth5g2Block.show()),a.setEffectiveTimeStatus()}},"models.guestNetwork.guest6gEnable":{ev_value_change:function(e,t,o){"off"==t?(s.guestNetworkModuleView.guestNetworkAdv6gContent.hide(),s.guestNetworkModuleView.bandwidth6gBlock.hide()):(s.guestNetworkModuleView.guestNetworkAdv6gContent.show(),a.supportBandwidthConfig()&&s.guestNetworkModuleView.bandwidth6gBlock.show())}},"models.guestNetwork.guest2g5gEncryption":{ev_value_change:function(e,t,o){r.guestNetwork.guest2g5gEncryption.setTips(""),"none"==t?(s.guestNetworkModuleView.wpaCfgContent.hide(),s.guestNetworkModuleView.portalCfgContent.hide(),r.guestNetwork.guest2g5gPskVersion.disable(),r.guestNetwork.guest2g5gEncryption.setTips(i.su.CHAR.WIRELESS_SETTINGS.NOT_CONSIDERED_TIP)):"psk"==t?(s.guestNetworkModuleView.wpaCfgContent.show(),s.guestNetworkModuleView.portalCfgContent.hide(),r.guestNetwork.guest2g5gPskVersion.enable(),r.guestNetwork.guest2g5gPskVersion.setValue("rsn"),r.guestNetwork.guest2g5gPskKey.setVtype("psk_password")):"psk_sae"==t?(s.guestNetworkModuleView.wpaCfgContent.show(),s.guestNetworkModuleView.portalCfgContent.hide(),r.guestNetwork.guest2g5gPskVersion.enable(),r.guestNetwork.guest2g5gPskVersion.setValue("sae_transition"),r.guestNetwork.guest2g5gPskVersion.record(),r.guestNetwork.guest2g5gPskKey.setVtype("wpa3_password")):"portal"==t&&("portal"!=o&&(firstSelectPortal=!0),""==r.guestNetwork.guest2g5gAuthenticationType.getValue()&&r.guestNetwork.guest2g5gAuthenticationType.setValue("none"),""==r.guestNetwork.guest2g5gAuthenticationTimeout.getValue()&&r.guestNetwork.guest2g5gAuthenticationTimeout.setValue("always"),s.guestNetworkModuleView.portalCfgContent.show(),s.guestNetworkModuleView.wpaCfgContent.hide())}},"models.guestNetwork":{ev_loaded:function(e,t){a.supportWifi6E&&"psk"==r.guestNetwork.guest2g5gEncryption.getValue()&&(r.guestNetwork.guest2g5gEncryption.setValue("psk_sae"),r.guestNetwork.guest2g5gEncryption.record()),this.syncWifiSharingData()},ev_model_submit:function(e,t){this.syncWifiSharingData()}},"models.bandwidthCtrlModel.down_band_2g":{ev_value_change:function(e,t,o){""==r.bandwidthCtrlModel.up_band_2g.getValue()&&""!=t&&r.bandwidthCtrlModel.up_band_2g.setNormal()}},"models.bandwidthCtrlModel.up_band_2g":{ev_value_change:function(e,t,o){""==r.bandwidthCtrlModel.down_band_2g.getValue()&&""!=t&&r.bandwidthCtrlModel.down_band_2g.setNormal()}},"models.bandwidthCtrlModel.down_band_5g1":{ev_value_change:function(e,t,o){""==r.bandwidthCtrlModel.up_band_5g1.getValue()&&""!=t&&r.bandwidthCtrlModel.up_band_5g1.setNormal()}},"models.bandwidthCtrlModel.up_band_5g1":{ev_value_change:function(e,t,o){""==r.bandwidthCtrlModel.down_band_5g1.getValue()&&""!=t&&r.bandwidthCtrlModel.down_band_5g1.setNormal()}},"models.bandwidthCtrlModel.down_band_5g2":{ev_value_change:function(e,t,o){""==r.bandwidthCtrlModel.up_band_5g2.getValue()&&""!=t&&r.bandwidthCtrlModel.up_band_5g2.setNormal()}},"models.bandwidthCtrlModel.up_band_5g2":{ev_value_change:function(e,t,o){""==r.bandwidthCtrlModel.down_band_5g2.getValue()&&""!=t&&r.bandwidthCtrlModel.down_band_5g2.setNormal()}},"models.bandwidthCtrlModel.enable_2g":{ev_value_change:function(e,t,o){"on"==t?s.guestNetworkModuleView.bandwidth2gConfig.show():s.guestNetworkModuleView.bandwidth2gConfig.hide()}},"models.bandwidthCtrlModel.enable_5g1":{ev_value_change:function(e,t,o){"on"==t?s.guestNetworkModuleView.bandwidth5gConfig.show():s.guestNetworkModuleView.bandwidth5gConfig.hide()}},"models.bandwidthCtrlModel.enable_5g2":{ev_value_change:function(e,t,o){"on"==t?s.guestNetworkModuleView.bandwidth5g2Config.show():s.guestNetworkModuleView.bandwidth5g2Config.hide()}},"models.bandwidthCtrlModel.enable_6g":{ev_value_change:function(e,t,o){"on"==t?s.guestNetworkModuleView.bandwidth6gConfig.show():s.guestNetworkModuleView.bandwidth6gConfig.hide()}},"models.accessTimeModel.type":{ev_value_change:function(e,t,o){"custom"==t?s.guestNetworkModuleView.customTimeSelect.show():s.guestNetworkModuleView.customTimeSelect.hide()}},"models.accessTimeModel":{ev_loaded:function(e,t,o){0<r.accessTimeModel.int_time.getValue()?r.accessTimeModel.remain_time.show():r.accessTimeModel.remain_time.hide()}},"models.accessTimeModel.day":{ev_value_change:function(e,t,o){a.checkEffectiveTime()}},"models.accessTimeModel.hour":{ev_value_change:function(e,t,o){a.checkEffectiveTime()}},"models.accessTimeModel.min":{ev_value_change:function(e,t,o){a.checkEffectiveTime()}},"models.portalAuthCfg.titleColorPicker":{ev_value_change:function(e,t){i.su.isIe8?s.guestNetworkModuleView.portalLoginPreview.changeTitleColor(i.su.ie8rgbToRgbString(t||{rgb:"ffffff",opacity:100})):s.guestNetworkModuleView.portalLoginPreview.changeTitleColor(i.su.rgbToRgbString(t||"ffffff"))}},"models.portalAuthCfg.themeColorPicker":{ev_value_change:function(e,t){i.su.isIe8?s.guestNetworkModuleView.portalLoginPreview.changeThemeColor(i.su.ie8rgbToRgbString(t||{rgb:"ffffff",opacity:100})):s.guestNetworkModuleView.portalLoginPreview.changeThemeColor(i.su.rgbToRgbString(t||"ffffff"))}},"models.portalAuthCfg.checkContent":{ev_value_change:function(e,t,o){"off"==t?(r.portalAuthCfg.content.hide(),s.guestNetworkModuleView.portalLoginPreview.hideCheckbox()):(r.portalAuthCfg.content.show(),s.guestNetworkModuleView.portalLoginPreview.showCheckbox(),r.portalAuthCfg.content.getValue()||r.portalAuthCfg.content.setValue(i.su.CHAR.GUEST_NETWORK.TERMS_OF_USE_NOTE))}}}),t.accessTimeDayStore.loadData(a.setDayStoreData()),t.accessTimeHourStore.loadData(a.setHourStoreData()),t.accessTimeMinStore.loadData(a.setMinStoreData()),r.guestNetwork.load({success:function(e,t){a.supportWifi6E&&(r.guestNetwork.supportWifi6E.setValue(!0),r.guestNetwork.supportWifi6E.record())}}),a.supportBandwidthConfig()&&r.bandwidthCtrlModel.load(),a.supportEffectiveTime()&&r.accessTimeModel.load(),a.checkStatus()}},init:function(e,t,o,n,a,s){}},function(n,u,g,e,t,a){var o=null,s="";return{isTriband:a.device.getIsTriband(),supportWifi6E:a.device.getConfig().supportWifi6E,portalResetFlag:!1,MODE:{ADVANCED:"advanced",BASIC:"basic"},setMode:function(e){s=e},getMode:function(){return s||n.MODE.ADVANCED},supportBandwidthConfig:function(){return n.getMode()!==n.MODE.BASIC&&a.device.getConfig().isGuestNetworkBandwidthCtrlSupport&&"router"===a.device.getCurrentMode()},supportEffectiveTime:function(){return n.getMode()!==n.MODE.BASIC&&a.device.getConfig().isGuestNetworkEffectTimeSupport},checkStatus:function(){a.ajax.request({proxy:"wireless2gProxy",method:"read",success:function(e){n.isRunning()&&void 0!==e&&("off"===(wireless2gEnable=e.enable)?(g.guestNetwork.guest2gEnable.disable(),g.guestNetwork.guest2gEnable.setTips(i.su.CHAR.GUEST_NETWORK.ENABLE_TIPS)):(g.guestNetwork.guest2gEnable.enable(),g.guestNetwork.guest2gEnable.setTips(""),"no"===(e.extinfo.wdsGuestCompatible||"no")&&a.ajax.request({proxy:"wireless2gParameterProxy",method:"read",success:function(e){"on"===e.enable&&(g.guestNetwork.guest2gEnable.disable(),g.guestNetwork.guest2gEnable.setTips(i.su.CHAR.GUEST_NETWORK.WDS_CONFLICT_NOTE))}})))}}),a.ajax.request({proxy:"wireless5gProxy",method:"read",success:function(e){n.isRunning()&&void 0!==e&&("off"===(wireless5gEnable=e.enable)?(g.guestNetwork.guest5gEnable.disable(),g.guestNetwork.guest5gEnable.setTips(i.su.CHAR.GUEST_NETWORK.ENABLE_TIPS)):(g.guestNetwork.guest5gEnable.enable(),g.guestNetwork.guest5gEnable.setTips(""),"no"===(e.extinfo.wdsGuestCompatible||"no")&&a.ajax.request({proxy:"wireless5gParameterProxy",method:"read",success:function(e){"on"===e.enable&&(g.guestNetwork.guest5gEnable.disable(),g.guestNetwork.guest5gEnable.setTips(i.su.CHAR.GUEST_NETWORK.WDS_CONFLICT_NOTE))}})))}}),this.isTriband&&a.ajax.request({proxy:"wireless5g2Proxy",method:"read",success:function(e){n.isRunning()&&void 0!==e&&("off"===(wireless52gEnable=e.enable)?(g.guestNetwork.guest5g2Enable.disable(),g.guestNetwork.guest5g2Enable.setTips(i.su.CHAR.GUEST_NETWORK.ENABLE_TIPS)):(g.guestNetwork.guest5g2Enable.enable(),g.guestNetwork.guest5g2Enable.setTips(""),"no"===(e.extinfo.wdsGuestCompatible||"no")&&a.ajax.request({proxy:"wireless5g2ParameterProxy",method:"read",success:function(e){"on"===e.enable&&(g.guestNetwork.guest5g2Enable.disable(),g.guestNetwork.guest5g2Enable.setTips(i.su.CHAR.GUEST_NETWORK.WDS_CONFLICT_NOTE))}})))}}),this.supportWifi6E&&a.ajax.request({proxy:"wireless6gProxy",method:"read",success:function(e){n.isRunning()&&void 0!==e&&(wireless6gEnable=e.enable,wireless6gDisabled=e.disabled,wireless6gDisabledAll=e.disabledAll,"off"===wireless6gEnable?(g.guestNetwork.guest6gEnable.disable(),g.guestNetwork.guest6gEnable.setTips(i.su.CHAR.GUEST_NETWORK.ENABLE_TIPS)):(g.guestNetwork.guest6gEnable.enable(),g.guestNetwork.guest6gEnable.setTips(""),"no"===(e.extinfo.wdsGuestCompatible||"no")&&a.ajax.request({proxy:"wireless6gParameterProxy",method:"read",success:function(e){"on"===e.enable&&(g.guestNetwork.guest6gEnable.disable(),g.guestNetwork.guest6gEnable.setTips(i.su.CHAR.GUEST_NETWORK.WDS_CONFLICT_NOTE))}})))}})},preView:function(e,t){if(i.su.isIe9or8()){if(!e.value)return!1;"logo-imge"==t&&u.guestNetworkModuleView.portalLoginPreview.changeLogo(e.value),"background-imge"==t&&u.guestNetworkModuleView.portalLoginPreview.changeBackground(e.value)}else{e=e.files[0];if(!e)return!1;var o=new FileReader;o.readAsDataURL(e),o.onload=function(e){"logo-imge"==t&&u.guestNetworkModuleView.portalLoginPreview.changeLogo(this.result),"background-imge"==t&&u.guestNetworkModuleView.portalLoginPreview.changeBackground(this.result)}}},getPortalLoginPageInfo:function(){a.ajax.request({proxy:"portalLogoReadProxy",method:"read",success:function(e){e.data.data.imglogopath&&u.guestNetworkModuleView.portalLoginPreview.changeLogoFormServer(e.data.data.imglogopath)}}),a.ajax.request({proxy:"portalBackgroundReadProxy",method:"read",success:function(e){e.data.data.imgbgrpath&&u.guestNetworkModuleView.portalLoginPreview.changeBackgroundFormServer(e.data.data.imgbgrpath)}}),g.portalAuthCfg.load({success:function(){g.portalAuthCfg.getData().content?(g.portalAuthCfg.content.show(),u.guestNetworkModuleView.portalLoginPreview.showCheckbox()):(g.portalAuthCfg.content.hide(),u.guestNetworkModuleView.portalLoginPreview.hideCheckbox()),u.guestNetworkModuleView.portalLoginPreview.setTitle(g.portalAuthCfg.title.getValue())}})},resetPortalLoginPageImgInput:function(){u.guestNetworkModuleView.backgroundBrowse.hide(),u.guestNetworkModuleView.backgroundBrowse.resetPreview(),g.portalAuthCfg.backgroundBrowseId.resetFile(),g.portalAuthCfg.logoBrowseId.setNormal(),g.portalAuthCfg.logoBrowseId.resetFile()},getImgBlob:function(e,t,o,n){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(a,s,r){var u=this;setTimeout(function(){for(var e=atob(u.toDataURL(s,r).split(",")[1]),t=e.length,o=new Uint8Array(t),n=0;n<t;n++)o[n]=e.charCodeAt(n);a(new Blob([o],{type:s||"image/png"}))})}});var a=document.createElement("canvas"),s=(a.width=t,a.height=o,a.getContext("2d")),r=new Image;r.src=e,r.onload=function(){s.drawImage(r,0,0),a.toBlob(function(e){n&&n(e)},"image/png")}},sendDefaultPortalLoginPageBackImg:function(o){n.getImgBlob("./themes/default/img/portal_back.png",375,812,function(e){var t=new FormData;t.append("background",e,"portal_back.png"),t.append("operation","upload"),i.ajax({url:i.su.url("/admin/wifidog?form=portal_background"),type:"POST",data:t,dataType:"json",contentType:!1,processData:!1,preventSuccessEvent:!0,success:function(e){o&&o()},fail:function(e){o&&o()},error:function(e){o&&o()}})})},sendDefaultPortalLoginPageLogoImg:function(o){n.getImgBlob("./themes/default/img/portal_logo.png",219,83,function(e){var t=new FormData;t.append("logo",e,"portal_logo.png"),t.append("operation","upload"),i.ajax({url:i.su.url("/admin/wifidog?form=portal_logo"),type:"POST",data:t,dataType:"json",contentType:!1,processData:!1,preventSuccessEvent:!0,success:function(e){o&&o()},fail:function(e){o&&o()},error:function(e){o&&o()}})})},hidePortal:function(){g.guestNetwork.guest2g5gEncryption.hideItems("portal")},diableEncryption:function(){g.guestNetwork.guest2g5gEncryption.disable()},enableEncryption:function(){g.guestNetwork.guest2g5gEncryption.enable()},syncWifiSharingData:function(){var e,t,o,n=g.guestNetwork.guest2gSSID.getValue(),a=g.guestNetwork.guest5gSSID.getValue(),s=g.guestNetwork.guest5g2SSID.getValue(),r=g.guestNetwork.guest6gSSID.getValue();switch(g.guestNetwork.guest2g5gEncryption.getValue()){case"none":e="",t="none",o="owe";break;case"psk":case"psk_sae":e=g.guestNetwork.guest2g5gPskKey.getValue(),t=g.guestNetwork.guest2g5gEncryption.getValue(),o=g.guestNetwork.guest2g5gEncryption.getValue();break;default:e="",o=t="none"}u.guestNetworkModuleView.wifisharing24g.setValue({ssid:n,password:e,security:t}),u.guestNetworkModuleView.wifisharing5g1.setValue({ssid:a,password:e,security:t}),u.guestNetworkModuleView.wifisharing5g2.setValue({ssid:s,password:e,security:t}),u.guestNetworkModuleView.wifisharing6g.setValue({ssid:r,password:e,security:o})},setDayStoreData:function(){for(var e,t=[],o=1;o<=30;o++)t[e=o-1]={},t[e].name=1==e?e+" "+i.su.CHAR.GUEST_NETWORK.DAY:e+" "+i.su.CHAR.GUEST_NETWORK.DAYS,t[e].value=e;return t[0].selected=!0,t},setHourStoreData:function(){for(var e,t=[],o=1;o<=24;o++)t[e=o-1]={},t[e].name=1==e?e+" "+i.su.CHAR.GUEST_NETWORK.HOUR:e+" "+i.su.CHAR.GUEST_NETWORK.HOURS,t[e].value=e;return t[0].selected=!0,t},setMinStoreData:function(){for(var e,t=[],o=1;o<=60;o++)t[e=o-1]={},t[e].name=e+" "+i.su.CHAR.GUEST_NETWORK.MIN,t[e].value=e;return t[0].selected=!0,t},setEffectiveTimeStatus:function(){var e,t,o;n.supportEffectiveTime()&&(e="on"==g.guestNetwork.guest2gEnable.getValue(),t="on"==g.guestNetwork.guest5gEnable.getValue(),o="on"==g.guestNetwork.guest5g2Enable.getValue(),(a.device.getIsTriband()?!e&&!t&&!o:!e&&!t)||"ap"===a.device.getCurrentMode()?u.guestNetworkModuleView.accessTimeBlock.hide():u.guestNetworkModuleView.accessTimeBlock.show())},stopAccessTimeTick:function(){a.timer.clearInterval(this,o),o=null},checkEffectiveTime:function(){var e=g.accessTimeModel.day.getValue(),t=g.accessTimeModel.hour.getValue(),o=g.accessTimeModel.min.getValue();0==e&&0==t&&0==o?(g.accessTimeModel.day.setError(i.su.CHAR.GUEST_NETWORK.ALL_ZERO_ERROR),g.accessTimeModel.hour.setError(),g.accessTimeModel.min.setError()):(g.accessTimeModel.day.setNormal(),g.accessTimeModel.hour.setNormal(),g.accessTimeModel.min.setNormal())},beforeDestroy:function(){}}})}(jQuery);