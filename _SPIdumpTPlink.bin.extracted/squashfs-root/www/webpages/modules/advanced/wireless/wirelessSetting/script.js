!function(v){v.su.moduleManager.define("wirelessSettings",{models:["lanAdvLanModel","regionWirelessModel","regionWirelessCapabilityModel","wirelessSettingsControl","ofdmaModel","twtModel","wirelessSmartConn","wireless24g","wireless5g1","wireless5g2","wireless6g","ffsModel"],stores:["regionStore","ofdmaMumimoStore"],services:["moduleLoader","ajax","device","moduleManager"],views:["wirelessSettingsView"],deps:["utils","main"],listeners:{ev_on_launch:function(e,s,i,a,n,r,l){i.wirelessSettingsView.ofdmaMumimo.hide(),s.supportOfdmaMumimo?(s.hideStandaloneOfdmaAndMimo(),a.ofdmaModel.load()):l.device.getOFDMA()?(a.ofdmaModel.enable.show(),a.ofdmaModel.load()):a.ofdmaModel.enable.hide(),l.device.getConfig().supportTWT&&(a.twtModel.enable.show(),a.twtModel.load()),s.supportWifi6E&&(i.wirelessSettingsView.wirelessSettingsPanel.setInstruction(v.su.CHAR.WIRELESS_SETTINGS.WIRELESS_SETTINGS_INTRO_6G),a.wirelessSmartConn.smartEnable.setToolTip(v.su.CHAR.WIRELESS_SETTINGS.SMART_CONN_NOTE_6G)),this.prepare().done(function(){s.launchModules()})},ev_region_reload:function(){}},init:function(m,c,S,e,_,f){this.control({".index-common-save-btn":{ev_will_auto_save:function(e,s,i){for(var a,n,r,l,t,o,d,g,u=!1,w=0,p=i.length;w<p;w++)-1<i[w].dataObj.name.indexOf("wireless")&&(u=!0);u&&(a=f.moduleManager.get("wirelessAdv24g"),n=f.moduleManager.get("wirelessAdv5g1"),r=a.getWifiInfo(),l=n.getWifiInfo(),m.isTriband&&(o=(t=f.moduleManager.get("wirelessAdv5g2")).getWifiInfo()),m.supportWifi6E&&(g=(d=f.moduleManager.get("wirelessAdv6g")).getWifiInfo()),"on"===S.wirelessSmartConn.smartEnable.getValue()&&(c.wirelessSettingsView.wirelessNetwork24g.setLabelField(v.su.CHAR.WIRELESS_SETTINGS.SMART_CONN),m.supportWifi6E&&m.isTriband&&c.wirelessSettingsView.wirelessNetwork24g.setLabelField(v.su.CHAR.WIRELESS_SETTINGS.NETWORK_24G_5G1_5G2),m.supportWifi6E&&!m.isTriband&&c.wirelessSettingsView.wirelessNetwork24g.setLabelField(v.su.CHAR.WIRELESS_SETTINGS.NETWORK_24G_5G),l.enable=r.enable,m.isTriband)&&(o.enable=r.enable),!a.beforeSubmit()||!n.beforeSubmit()||t&&!t.beforeSubmit()||d&&!d.beforeSubmit()||(r.enable||l.enable||m.isTriband&&o.enable||m.supportWifi6E&&g.enable?r.enable||l.enable||m.isTriband&&o.enable||!m.supportWifi6E||!g.enable?m.submitWirelessSetting():_.main.confirm(v.su.CHAR.WIRELESS_SETTINGS.WLAN_ONLY_6G_NOTE,function(){m.submitWirelessSetting()},null,v.su.CHAR.WIRELESS_SETTINGS.DISABLE_ANYWAY):_.main.confirm(v.su.CHAR.WIRELESS_SETTINGS.WLAN_ONT_ON_NOTE,function(){m.submitWirelessSetting()},null,v.su.CHAR.WIRELESS_SETTINGS.DISABLE_ANYWAY)))}}}),this.listen({"models.regionWirelessModel":{ev_loaded:function(e,s){var i=S.regionWirelessModel.capability.getValue();S.regionWirelessCapabilityModel.loadData(i,!0),m.region=s.country.toUpperCase(),m.initRegionData(),m.trigger("ev_region_reload")}},"models.ffsModel":{ev_will_auto_save:function(e,s){s.preventDefault()}},"models.wireless24g":{ev_will_auto_save:function(e,s){s.preventDefault()}},"models.wireless5g1":{ev_will_auto_save:function(e,s){s.preventDefault()}},"models.wireless5g2":{ev_will_auto_save:function(e,s){s.preventDefault()}},"models.wireless6g":{ev_will_auto_save:function(e,s){s.preventDefault()}},"models.wirelessSmartConn":{ev_will_auto_save:function(e,s){s.preventDefault()}},"models.wirelessSmartConn.smartEnable":{ev_value_change:function(e,s,i){"on"===s?(f.moduleManager.get("wirelessAdv5g1").setEnableLabel(!0),f.moduleManager.get("wirelessAdv24g").setEnableLabel(!0),m.isTriband&&f.moduleManager.get("wirelessAdv5g2").setEnableLabel(!0)):(f.moduleManager.get("wirelessAdv5g1").setEnableLabel(),f.moduleManager.get("wirelessAdv24g").setEnableLabel(),m.isTriband&&f.moduleManager.get("wirelessAdv5g2").setEnableLabel())}},"views.wirelessSettingsView.ofdmaMumimo":{ev_value_change:function(e,s,i){i&&m.setOFDMAWithMimo(s)}}})}},function(_,g,f,e,u,h){var t=null,n=!0,r=!0,l=!0,o=!0,s=!0,i="24g",a="5g1",d="5g2",w="6g",p=[52,56,60,64,100,104,108,112,116,120,124,128,132,136,140,144],m=h.device.getIsTriband(),c=h.device.getConfig().supportWifi6E,S=[i,a];return m&&S.push(d),c&&S.push(w),{isTriband:m,supportWifi6E:c,supportOfdmaMumimo:h.device.getConfig().supportOfdmaMumimo,supportOverlapWithDFS:h.device.getConfig().supportOverlapWithDFS,isConnectionInterrupted:function(){for(var e=!1,s=0;s<S.length;s++){var i=S[s];if(/5g/i.test(i)){var a=f["wireless"+i]["htmode"],n=f["wireless"+i]["channel"],i=_.getWirelessInfo(i);if(!_.supportOverlapWithDFS&&a.isDirty()&&"160"==i.htmode){e=!0;break}if(n.isDirty()&&p.includes(i.channel)){e=!0;break}}}return e},getLanIP:function(){return f.lanAdvLanModel.ipaddr.getValue()},prepare:function(){var e=v.Deferred(),s=!1,i=!1;return f.regionWirelessModel.load({success:function(){i=!0,s&&e.resolve(!0)}}),f.lanAdvLanModel.load({success:function(){s=!0,i&&e.resolve(!0)}}),e.promise()},MODE:{ADVANCED:"advanced",BASIC:"basic",QUICK_SETUP:"qs"},setMode:function(e){t=e},getMode:function(){return t},launchChildrenModules:function(){var e;switch(t){case _.MODE.ADVANCED:e="wirelessAdvSmartConnView";break;case _.MODE.BASIC:e="wirelessAdvSmartConnViewBasic"}h.moduleLoader.load({module:"wirelessSettings"},{module:"wirelessAdvSmartConn",view:e},f.wirelessSettingsControl.wirelessSettingsSmartConnLoader)},has2g:function(){return n},has5g1:function(){return r},has5g2:function(){return l},has6g:function(){return o},launchModules:function(){var e=function(e){var s;switch(t){case _.MODE.ADVANCED:s=e+"View";break;case _.MODE.BASIC:s=e+"ViewBasic";break;case _.MODE.QUICK_SETUP:s=e+"ViewQs";break;default:s=e+"View"}return s},s=(f.wirelessSettingsControl.detailFreqConfigField.show(),v.Deferred()),i=v.Deferred(),a=v.Deferred(),n=(dfd6g=v.Deferred(),""),r="",l="";enable6g="",_.has2g()&&h.moduleLoader.load({module:"wirelessSettings"},{module:"wirelessAdv24g",view:e("wirelessAdv24g")},f.wirelessSettingsControl.wirelessSettings24gLoader,function(){var e=h.moduleManager.get("wirelessAdv24g");v.when(e.dfd).then(function(){n=e.getHwMode(),s.resolve()})}),_.has5g1()&&h.moduleLoader.load({module:"wirelessSettings"},{module:"wirelessAdv5g1",view:e("wirelessAdv5g1")},f.wirelessSettingsControl.wirelessSettings5g1Loader,function(){_.isTriband?g.wirelessSettingsView.wirelessTitle5g.setLabelField(v.su.CHAR.WIRELESS_SETTINGS.NETWORK_5G1):(h.moduleManager.get("wirelessAdv5g1").set5g1Name(),g.wirelessSettingsView.wirelessTitle5g.setLabelField(v.su.CHAR.WIRELESS_SETTINGS.NETWORK_5G));var e=h.moduleManager.get("wirelessAdv5g1");v.when(e.dfd).then(function(){r=e.getHwMode(),i.resolve()})}),_.isTriband&&h.moduleLoader.load({module:"wirelessSettings"},{module:"wirelessAdv5g2",view:e("wirelessAdv5g2")},f.wirelessSettingsControl.wirelessSettings5g2Loader,function(){var e=h.moduleManager.get("wirelessAdv5g2");v.when(e.dfd).then(function(){l=e.getHwMode(),a.resolve()})}),_.supportWifi6E&&h.moduleLoader.load({module:"wirelessSettings"},{module:"wirelessAdv6g",view:e("wirelessAdv6g")},f.wirelessSettingsControl.wirelessSettings6gLoader,function(){var e=h.moduleManager.get("wirelessAdv6g");v.when(e.dfd).then(function(){enable6g=e.getWirelessEnable(),dfd6g.resolve()})}),_.isTriband||_.supportWifi6E?_.isTriband&&!_.supportWifi6E?v.when(s,i,a).then(function(){"bgn"==n&&"anac_5"==r&&"anac_5"==l?(f.ofdmaModel.enable.disable(),f.twtModel.enable.disable()):(f.ofdmaModel.enable.enable(),_.supportOfdmaMumimo&&!_.hasAxHwMode()||f.twtModel.enable.enable()),_.initOfdmaAndMimo()}):!_.isTriband&&_.supportWifi6E?v.when(s,i,dfd6g).then(function(){"bgn"==n&&"anac_5"==r&&"off"==enable6g?(f.ofdmaModel.enable.disable(),f.twtModel.enable.disable()):(f.ofdmaModel.enable.enable(),_.supportOfdmaMumimo&&!_.hasAxHwMode()||f.twtModel.enable.enable()),_.initOfdmaAndMimo()}):v.when(s,i,a,dfd6g).then(function(){"bgn"==n&&"anac_5"==r&&"anac_5"==l&&"off"==enable6g?(f.ofdmaModel.enable.disable(),f.twtModel.enable.disable()):(f.ofdmaModel.enable.enable(),_.supportOfdmaMumimo&&!_.hasAxHwMode()||f.twtModel.enable.enable()),_.initOfdmaAndMimo()}):v.when(s,i).then(function(){"bgn"==n&&"anac_5"==r?(f.ofdmaModel.enable.disable(),f.twtModel.enable.disable()):(f.ofdmaModel.enable.enable(),_.supportOfdmaMumimo&&!_.hasAxHwMode()||f.twtModel.enable.enable()),_.initOfdmaAndMimo()})},showDetailFreqConfig:function(){f.wirelessSettingsControl.detailFreqConfigField.show()},hideDetailFreqConfig:function(){f.wirelessSettingsControl.detailFreqConfigField.hide()},initRegionData:function(){var e=f.regionWirelessCapabilityModel.channel2g.getValue(),s=f.regionWirelessCapabilityModel.channel5g.getValue(),i=f.regionWirelessCapabilityModel.channel5g2.getValue(),a=f.regionWirelessCapabilityModel.channel6g.getValue();u.utils.isEmptyObject(e)&&(n=!1),u.utils.isEmptyObject(s)&&(r=!1),u.utils.isEmptyObject(i)&&(l=!1),u.utils.isEmptyObject(a)&&(o=!1)},showWlanOnlyOn6gSaveNote:function(){g.wirelessSettingsView.wirelessOnlyOn6gNote.show()},showWlanOffSaveNote:function(){g.wirelessSettingsView.wirelessOffNote.show()},showWlanOnSaveNote:function(e,s){g.wirelessSettingsView.wirelessName.setValue(e),g.wirelessSettingsView.wirelessPassword.setValue(s),g.wirelessSettingsView.wirelessOnNote.show()},showWlanOnSmartOffSaveNote:function(){g.wirelessSettingsView.wirelessOnSmartOffNote.show()},loadWifiInfo:function(e,s,i,a){var n=g.wirelessSettingsView,r=f.wirelessSmartConn.smartEnable.getValue();"on"===r?(_.supportWifi6E&&_.isTriband&&g.wirelessSettingsView.wirelessNetwork24g.setLabelField(v.su.CHAR.WIRELESS_SETTINGS.NETWORK_24G_5G1_5G2),_.supportWifi6E&&!_.isTriband&&g.wirelessSettingsView.wirelessNetwork24g.setLabelField(v.su.CHAR.WIRELESS_SETTINGS.NETWORK_24G_5G)):g.wirelessSettingsView.wirelessNetwork24g.setLabelField(v.su.CHAR.WIRELESS_SETTINGS.NETWORK_24G),e.enable?(n.wirelessNote24g.show(),n.wirelessName24g.setValue(e.ssid),n.wirelessPassword24g.setValue(""===e.password?v.su.CHAR.WIRELESS_SETTINGS.NO_PASSWORD:e.password)):n.wirelessNote24g.hide(),s.enable&&"on"!==r?(n.wirelessNote5g.show(),n.wirelessName5g.setValue(s.ssid),n.wirelessPassword5g.setValue(""===s.password?v.su.CHAR.WIRELESS_SETTINGS.NO_PASSWORD:s.password)):n.wirelessNote5g.hide(),i&&i.enable&&"on"!==r?(n.wirelessNote5g2.show(),n.wirelessName5g2.setValue(i.ssid),n.wirelessPassword5g2.setValue(""===i.password?v.su.CHAR.WIRELESS_SETTINGS.NO_PASSWORD:i.password)):n.wirelessNote5g2.hide(),a&&a.enable?(n.wirelessNote6g.show(),n.wirelessName6g.setValue(a.ssid),n.wirelessPassword6g.setValue(""===a.password?v.su.CHAR.WIRELESS_SETTINGS.NO_PASSWORD:a.password)):n.wirelessNote6g.hide()},showWlanScheduleNote:function(){g.wirelessSettingsView.wirelessSwitchNote.setText(v.su.CHAR.WIRELESS_SETTINGS.NOTICE2),g.wirelessSettingsView.wirelessSwitchNote.show()},hideWlanOffNote:function(){g.wirelessSettingsView.wirelessSwitchNote.hide()},getSwitchSt:function(){return s},setSwitchSt:function(e){s=e},updateGuestNetwork:function(){var e;"basic"==_.getMode()&&(e=h.moduleManager.get("guestNetworkModule"))&&e.checkStatus()},replaceData:function(){var e=f.wireless24g.getData();delete e.htmode,delete e.hwmode,delete e.channel,delete e.htmode,f.wireless5g1.replaceData(e),_.isTriband&&f.wireless5g2.replaceData(e)},getWirelessUrl:function(){var e=["form=wireless_2g","form=wireless_5g"];return _.isTriband&&e.push("form=wireless_5g_2"),_.supportWifi6E&&e.push("form=wireless_6g"),"/admin/wireless?"+e.join("&")},submitWirelessSetting:function(){var e,s,i,a,n=f.wireless24g.enable.getValue(),r=(h.device.getConfig().supportAmazonFFS&&f.ffsModel.isDirty()&&"on"===n&&f.ffsModel.submit(),_.setOFDMAWithMimo(g.wirelessSettingsView.ofdmaMumimo.getValue()),"on"===f.wirelessSmartConn.smartEnable.getValue()&&_.replaceData(),h.moduleManager.get("wirelessAdv24g")),l=h.moduleManager.get("wirelessAdv5g1"),t=_.getWirelessUrl(),o=r.getHwMode(),d=l.getHwMode();_.isTriband&&(e=h.moduleManager.get("wirelessAdv5g2"),i=e.getHwMode()),_.supportWifi6E&&(s=h.moduleManager.get("wirelessAdv6g"),a=s.getWirelessEnable()),!r.beforeSubmit()||!l.beforeSubmit()||e&&!e.beforeSubmit()||s&&!s.beforeSubmit()||(_.isConnectionInterrupted()?u.main.confirm(v.su.CHAR.WIRELESS_SETTINGS.SECOND_CHECK_ENABLE_160_MHZ_NOTE,function(){_.doSubmitWirelessSetting(r,l,e,s,o,d,i,a,t)},null,v.su.CHAR.OPERATION.CONTINUE,v.su.CHAR.OPERATION.CANCEL):_.doSubmitWirelessSetting(r,l,e,s,o,d,i,a,t))},doSubmitWirelessSetting:function(n,r,l,t,o,d,g,u,e){var s=n.syncMainModel(),i=r.syncMainModel(),a=l&&l.syncMainModel(),w=t&&t.syncMainModel();if("on"===f.wirelessSmartConn.smartEnable.getValue()){delete s.wireless_2g_channel,delete s.wireless_2g_htmode,delete s.wireless_2g_hwmode;var p,m=[];for(p in s)m.push(p);for(var c=0;c<m.length;c++){var S=s[m[c]];i[m[c].replace(/_2g/g,"_5g")]=S,_.isTriband&&(i[m[c].replace(/_2g/g,"_5g_2")]=S)}i.wireless_5g_hwmode=d,_.isTriband&&(a.wireless_5g_2_hwmode=g),s=n.syncMainModel()}f.wirelessSmartConn.submit(),h.ajax.request({url:v.su.url(e),data:v.extend(!0,{operation:"write_spf"},s,i,a,w),success:function(){var e,s,i=n.getWifiInfo(),a=r.getWifiInfo();_.isTriband||_.supportWifi6E?_.isTriband&&!_.supportWifi6E?(e=l.getWifiInfo(),"bgn"==o&&"anac_5"==d&&"anac_5"==g?(f.ofdmaModel.enable.disable(),f.twtModel.enable.disable()):(f.ofdmaModel.enable.enable(),_.supportOfdmaMumimo&&!_.hasAxHwMode()||f.twtModel.enable.enable())):!_.isTriband&&_.supportWifi6E?(s=t.getWifiInfo(),"bgn"==o&&"anac_5"==d&&"off"==u?(f.ofdmaModel.enable.disable(),f.twtModel.enable.disable()):(f.ofdmaModel.enable.enable(),_.supportOfdmaMumimo&&!_.hasAxHwMode()||f.twtModel.enable.enable())):(e=l.getWifiInfo(),s=t.getWifiInfo(),"bgn"==o&&"anac_5"==d&&"anac_5"==g&&"off"==u?(f.ofdmaModel.enable.disable(),f.twtModel.enable.disable()):(f.ofdmaModel.enable.enable(),_.supportOfdmaMumimo&&!_.hasAxHwMode()||f.twtModel.enable.enable())):"bgn"==o&&"anac_5"==d?(f.ofdmaModel.enable.disable(),f.twtModel.enable.disable()):(f.ofdmaModel.enable.enable(),_.supportOfdmaMumimo&&!_.hasAxHwMode()||f.twtModel.enable.enable()),_.loadWifiInfo(i,a,e,s),("on"==f.wireless24g.enable.getValue()||"on"==f.wireless5g1.enable.getValue()||_.isTriband&&"on"==f.wireless5g2.enable.getValue()||_.supportWifi6E&&"on"==f.wireless6g.enable.getValue())&&_.showWlanOnSmartOffSaveNote(),n.syncWifiSharingData(),r.syncWifiSharingData(),l&&l.syncWifiSharingData(),t&&t.syncWifiSharingData(),_.updateGuestNetwork(),f.wireless24g.record(),f.wireless5g1.record(),f.wireless5g2.record(),f.wireless6g.record()}})},setOFDMAWithMimo:function(e){switch(e){case"all":_.setOfdmaAndMimo("on","on");break;case"ofdma":_.setOfdmaAndMimo("on","off");break;case"disable":_.setOfdmaAndMimo("off","off")}},modeChangeSet:function(){_.hasAxHwMode()?(f.twtModel.enable.enable(),g.wirelessSettingsView.ofdmaMumimo.enable()):(_.setOfdmaAndMimo("off","on"),f.twtModel.enable.disable(),g.wirelessSettingsView.ofdmaMumimo.setValue("disable"),g.wirelessSettingsView.ofdmaMumimo.disable())},getWirelessInfo:function(e){e=f["wireless"+e].getData();return e&&"on"===e.enable?e:{}},initOfdmaAndMimo:function(){if(!_.supportOfdmaMumimo)return!1;var e="on"===f.ofdmaModel.enable.getValue(),s=S.reduce(function(e,s){return e||"on"===_.getWirelessInfo(s)["mimo"]},!1);g.wirelessSettingsView.ofdmaMumimo.setValue(e?s?"all":"ofdma":"disable"),g.wirelessSettingsView.ofdmaMumimo.show(),_.modeChangeSet()},hideStandaloneOfdmaAndMimo:function(){f.ofdmaModel.enable.hide(),S.forEach(function(e){f["wireless"+e]["mimo"].hide()})},hasAxHwMode:function(){return S.reduce(function(e,s){s=_.getWirelessInfo(s)["hwmode"]||[];return e||-1<s.indexOf("ax")},!1)},setOfdmaAndMimo:function(e,s){f.ofdmaModel.enable.enable(),f.ofdmaModel.enable.setValue(e),S.forEach(function(e){f["wireless"+e]["mimo"].setValue(s)})}}})}(jQuery),$.su.storeManager.define("encryptionStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{value:$.su.securityCode.no_security,name:$.su.CHAR.WIRELESS_SETTINGS.NO_SECURITY},{value:$.su.securityCode.psk_aes,name:$.su.CHAR.WIRELESS_SETTINGS.WPA2_AES},{value:$.su.securityCode.psk_aes_tkip,name:$.su.CHAR.WIRELESS_SETTINGS.WPA2_AES_TKIP},{value:$.su.securityCode.psk_sae_personal,name:$.su.CHAR.WIRELESS_SETTINGS.WPA3_PERSONAL},{value:$.su.securityCode.psk_sae_personal_aes,name:$.su.CHAR.WIRELESS_SETTINGS.WPA3_PERSONAL_AES},{value:$.su.securityCode.wpa_enterprise,name:$.su.CHAR.WIRELESS_SETTINGS.WPA2_ENTERPRISE},{value:$.su.securityCode.wpa_enterprise_tkip,name:$.su.CHAR.WIRELESS_SETTINGS.WPA_WPA2_ENTERPRISE}]}),$.su.storeManager.define("encryption6GStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{value:"owe",name:$.su.CHAR.WIRELESS_SETTINGS.ENHANCED_OPEN},{value:"psk_sae",name:$.su.CHAR.WIRELESS_SETTINGS.WPA3_PERSONAL}]}),$.su.storeManager.define("wirelessVersionStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.WPA_WPA2_PSK,value:"auto"},{name:$.su.CHAR.WIRELESS_SETTINGS.WPA2_PSK,value:"rsn"}]}),$.su.storeManager.define("wirelessVersionEpStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.WPA_WPA2,value:"auto"},{name:$.su.CHAR.WIRELESS_SETTINGS.WPA2,value:"rsn"}]}),$.su.storeManager.define("wirelessWpa3VersionStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"sae_transition"},{name:$.su.CHAR.WIRELESS_SETTINGS.WPA3_SAE,value:"sae_only"}]}),$.su.storeManager.define("wirelessCipherStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.TKIP_AES,value:"auto"},{name:$.su.CHAR.WIRELESS_SETTINGS.AES,value:"aes"}]}),$.su.storeManager.define("wireless24gWpa3CipherStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"aes"}]}),$.su.storeManager.define("wireless5gWpa3CipherStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"ccmp"}]}),$.su.storeManager.define("wepTypeStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto",itemCls:"fix_min",checked:!0},{name:$.su.CHAR.WIRELESS_SETTINGS.OPEN_SYSTEM,value:"open"},{name:$.su.CHAR.WIRELESS_SETTINGS.SHARED_KEY,value:"shared"}]}),$.su.storeManager.define("wepKeySelectedStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{value:"1",name:$.su.CHAR.WIRELESS_SETTINGS.KEY1},{value:"2",name:$.su.CHAR.WIRELESS_SETTINGS.KEY2},{value:"3",name:$.su.CHAR.WIRELESS_SETTINGS.KEY3},{value:"4",name:$.su.CHAR.WIRELESS_SETTINGS.KEY4}]}),$.su.storeManager.define("wepKeyFormatStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.ASCII,value:"asic",checked:!0},{name:$.su.CHAR.WIRELESS_SETTINGS.HEXADECIMAL,value:"hex"}]}),$.su.storeManager.define("wepKeyTypeStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.BIT64,value:"64",checked:!0},{name:$.su.CHAR.WIRELESS_SETTINGS.BIT128,value:"128"}]}),$.su.storeManager.define("transPowerStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.LOW,value:"low",checked:!0},{name:$.su.CHAR.WIRELESS_SETTINGS.MIDDLE,value:"middle"},{name:$.su.CHAR.WIRELESS_SETTINGS.HIGH,value:"high"}]}),$.su.modelManager.define("regionWirelessModel",{type:"model",fields:[{name:"country",mapping:"country"},{name:"capability",mapping:"capability"}],proxy:{url:$.su.url("/admin/wireless?form=region")}}),$.su.modelManager.define("regionWirelessCapabilityModel",{type:"model",fields:[{name:"hwmode2g",mapping:"hwmode_2g"},{name:"hwmode5g",mapping:"hwmode_5g"},{name:"hwmode5g2",mapping:"hwmode_5g_2"},{name:"hwmode6g",mapping:"hwmode_6g"},{name:"htmode2g",mapping:"htmode_2g"},{name:"htmode5g",mapping:"htmode_5g"},{name:"htmode5g2",mapping:"htmode_5g_2"},{name:"htmode6g",mapping:"htmode_6g"},{name:"channel2g",mapping:"channel_2g"},{name:"channel5g",mapping:"channel_5g"},{name:"channel5g2",mapping:"channel_5g_2"},{name:"channel6g",mapping:"channel_6g"}]}),$.su.modelManager.define("localeCountryModel",{type:"model",fields:[{name:"country",mapping:"country"}],proxy:{url:"./data/locale.country.json"}}),$.su.storeManager.define("regionStore",{type:"store",fields:[{name:"name",convert:function(e){return $.su.CHAR.REGION[e]}},{name:"value"},{name:"noAutodetect",mapping:"no_autodetect"}],proxy:{url:"./data/region.json"}}),$.su.modelManager.define("wirelessSettingsControl",{type:"model",fields:[{name:"wirelessSettingsSmartConnLoader"},{name:"detailFreqConfigField"},{name:"wirelessSettings24gLoader"},{name:"wirelessSettings5g1Loader"},{name:"wirelessSettings5g2Loader"},{name:"wirelessSettings6gLoader"}]}),$.su.modelManager.define("ofdmaModel",{type:"model",fields:[{name:"enable",mapping:"enable"}],proxy:{url:$.su.url("/admin/wireless?form=ofdma")}}),$.su.modelManager.define("twtModel",{type:"model",fields:[{name:"enable",mapping:"enable"}],proxy:{url:$.su.url("/admin/wireless?form=twt")}}),$.su.storeManager.define("ofdmaMumimoStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{value:"all",name:$.su.CHAR.WIRELESS_SETTINGS.OFDMA_AND_MU},{value:"ofdma",name:$.su.CHAR.WIRELESS_SETTINGS.OFDMA_ONLY},{value:"disable",name:$.su.CHAR.WIRELESS_SETTINGS.DISABLE}]}),function(w){w.su.moduleManager.define("wirelessAdv24g",{services:["moduleManager","ajax","device"],stores:["encryptionStore","wirelessVersionStore","wirelessVersionEpStore","wirelessCipherStore","wirelessWpa3VersionStore","wireless24gWpa3CipherStore","wepTypeStore","wepKeySelectedStore","wepKeyFormatStore","wepKeyTypeStore","transPowerStore","hwmode2gStore","htmode2gStore","channel2gStore"],models:["wireless24g","wireless24gControl","regionWirelessCapabilityModel","quickSetupModel","wirelessSmartConn","ffsModel"],views:["wirelessAdv24gView","wirelessAdv24gViewBasic","wirelessAdv24gViewQs"],listeners:{ev_on_launch:function(e,s,i,a,n,r,l){s.handleRegionInfo(),s.dfd=w.Deferred(),a.wirelessSmartConn.load(),a.wireless24g.load({success:function(){s.dfd.resolve()}}),s.supportAmazonFFS()&&(a.ffsModel.enable.show(),a.ffsModel.load())}},deps:["utils","wirelessSettings"],init:function(l,e,t,r,o,a){this.listen({"models.wirelessSmartConn.smartEnable":{ev_value_change:function(e,s,i){a.moduleManager.get("wirelessSettings").getMode();"on"!==t.wireless24g.enable.getValue()&&"on"!==s?t.wireless24gControl.editField.hide():t.wireless24gControl.editField.show(),"on"===s?(t.wireless24g.htmode.setLabelField(w.su.CHAR.WIRELESS_SETTINGS.CHANNEL_WIDTH_2G),t.wireless24g.channel.setLabelField(w.su.CHAR.WIRELESS_SETTINGS.CHANNEL_2G),t.wireless24g.hwmode.hide(),t.wireless24g.mimo.hide()):(t.wireless24g.htmode.setLabelField(w.su.CHAR.WIRELESS_SETTINGS.CHANNEL_WIDTH),t.wireless24g.channel.setLabelField(w.su.CHAR.WIRELESS_SETTINGS.CHANNEL),t.wireless24g.hwmode.show(),!l.supportOfdmaMumimo&&l.isSupportMUMIMO&&t.wireless24g.mimo.show())}},"models.wireless24g.enable":{ev_value_change:function(e,s,i){var a=t.wirelessSmartConn.smartEnable.getValue(),n=l.supportAmazonFFS(),r="";"on"===s?(this.disableAll=!1,t.wireless24gControl.editField.show(),l.isSupportMUMIMO||(t.wireless24g.mimo.hide(),t.wireless24g.mimo.disable()),l.supportOfdmaMumimo&&t.wireless24g.mimo.hide(),n&&(t.ffsModel.enable.enable(),t.ffsModel.enable.setTips(r))):(this.disableAll=!0,r="on"!==a?(t.wireless24gControl.editField.hide(),w.su.CHAR.WIRELESS_SETTINGS.AMAZON_WIFI_24G_DISABLE_NOTE):w.su.CHAR.WIRELESS_SETTINGS.AMAZON_WIFI_DISABLE_NOTE,n&&(t.ffsModel.enable.disable(),t.ffsModel.enable.setTips(r))),i&&o.wirelessSettings.modeChangeSet()}},"models.wireless24g.encryption":{ev_value_change:function(e,s,i){switch(t.wireless24gControl.wpaPersonal24g.hide(),t.wireless24gControl.wpaEnterprise24g.hide(),s){case w.su.securityCode.no_security:t.wireless24gControl.wpaPersonal24g.hide(),t.wireless24gControl.wpaEnterprise24g.hide();break;case w.su.securityCode.psk_aes:case w.su.securityCode.psk_aes_tkip:t.wireless24g.pskKey.setVtype("psk_password"),t.wireless24gControl.wpaPersonal24g.show(),t.wireless24gControl.wpaEnterprise24g.hide();break;case w.su.securityCode.psk_sae_personal:case w.su.securityCode.psk_sae_personal_aes:t.wireless24g.pskKey.setVtype("wpa3_password"),t.wireless24gControl.wpaPersonal24g.show(),t.wireless24gControl.wpaEnterprise24g.hide();break;case w.su.securityCode.wpa_enterprise:case w.su.securityCode.wpa_enterprise_tkip:t.wireless24gControl.wpaEnterprise24g.show(),t.wireless24gControl.wpaPersonal24g.hide()}s==w.su.securityCode.psk_aes_tkip||s==w.su.securityCode.wpa_enterprise_tkip?t.wireless24g.hwmode.disableItems(["ax"]):t.wireless24g.hwmode.enableItems(["ax"]),s==w.su.securityCode.no_security||s==w.su.securityCode.psk_aes_tkip?t.wireless24g.encryption.setTips(w.su.CHAR.WIRELESS_SETTINGS.NOT_CONSIDERED_TIP):t.wireless24g.encryption.setTips("")}},"models.wireless24g.hwmode":{ev_value_change:function(e,s,i){var a,n=t.regionWirelessCapabilityModel.channel2g.getValue();switch(n&&13<n.length&&(a=t.wireless24g.channel.getValue(),n=l.getHtChannel(n,20),"b"!=s&&n.pop(),r.channel2gStore.loadItems(n),o.utils.valInObjArr(a,n)?t.wireless24g.channel.setValue(a):t.wireless24g.channel.setValue("auto")),s){case"b":case"g":case"bg":t.wireless24g.htmode.disableItems(["40"]),t.wireless24g.htmode.setValue("auto"),t.wireless24g.htmode.hide();break;default:t.wireless24g.htmode.enableItems(["40"]),t.wireless24g.htmode.show()}"ax"==s?t.wireless24g.encryption.disableItems([w.su.securityCode.psk_aes_tkip,w.su.securityCode.wpa_enterprise_tkip]):t.wireless24g.encryption.enableItems([w.su.securityCode.psk_aes_tkip,w.su.securityCode.wpa_enterprise_tkip]),i&&l.supportOfdmaMumimo&&o.wirelessSettings.modeChangeSet()}},"models.wireless24g":{ev_loaded:function(e,s){a.ajax.request({proxy:"sysWireless2gProxy",data:{operation:"read"},success:function(e){e&&t.wireless24g&&t.wireless24g.channel&&("on"==e.ENABLE?t.wireless24g.channel.disable():t.wireless24g.channel.enable())}}),this.syncWifiSharingData()},ev_model_submit:function(e,s){this.syncWifiSharingData()},ev_will_auto_save:function(e,s){s.preventDefault()}},"models.ffsModel":{ev_will_auto_save:function(e,s){s.preventDefault()}}})}},function(s,n,g,u,a,i){return{dfd:null,SYS_WIRELESS_2G_URL:w.su.url("/admin/wireless?form=syspara_2g"),isTriband:i.device.getIsTriband(),supportOfdmaMumimo:i.device.getConfig().supportOfdmaMumimo,isSupportMUMIMO:(i.device.getConfig().supportMUMIMO||[]).includes("2g"),supportAmazonFFS:function(){var e=i.moduleManager.get("wirelessSettings").getMode();return i.device.getConfig().supportAmazonFFS&&"router"===i.device.getCurrentMode()&&"advanced"===e},onDestroy:function(){var e=i.moduleManager.get("wirelessSettings");e&&e.off("ev_region_reload",s.handleRegionInfo)},handleRegionInfo:function(){var e=g.regionWirelessCapabilityModel.hwmode2g.getValue();if(e){for(var s=[],i=e.length,a=0;a<i;a++){var n={},r="MODE_"+e[a].toUpperCase();n.name=w.su.CHAR.WIRELESS_SETTINGS[r],n.value=e[a],s.push(n)}u.hwmode2gStore.loadData(s)}var l=g.regionWirelessCapabilityModel.htmode2g.getValue();if(l){var t=[],i=l.length;t[0]={name:"20/40"+w.su.CHAR.WIRELESS_SETTINGS.MHZ,value:"auto"};for(a=0;a<i;a++)(n={}).name=l[a]+w.su.CHAR.WIRELESS_SETTINGS.MHZ,n.value=l[a],t.push(n);u.htmode2gStore.loadData(t)}var o=g.regionWirelessCapabilityModel.channel2g.getValue();if(o){var d=[],i=o.length;d[0]={name:w.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"};for(a=0;a<i;a++)(n={}).name=o[a],n.value=o[a],d.push(n);u.channel2gStore.loadData(d)}},disableAll:!1,getHtChannel:function(e,s){if(!e)return[];var i=[],a=(i[0]={name:w.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},e.length);if(!(s%20))for(var n=-1,r=0,l=0;l<=a;l++){var t={},o=parseInt(e[l]);if(n<0||n+4==o)r+=20;else{for(;r%s;)i.pop(),r-=20;if(isNaN(o))break;r=20}t.name=n=o,t.value=o,i.push(t)}return i},beforeSubmit:function(){var e=g.wireless24g.server.getValue(),s=g.wireless24g.encryption.getValue(),i=g.wireless24g.enable.getValue();return g.wireless24g.disabled_all.setValue(this.disableAll?"on":"off"),"on"==i&&"wpa"==s&&g.wireless24g.server.setValidator(function(){return a.utils.ipToInt(e)!=a.utils.ipToInt(a.wirelessSettings.getLanIP())||w.su.CHAR.ERROR["00000077"]}),g.wireless24g.validate()},syncWifiSharingData:function(){var e=this.getWifiInfo(),s=e.ssid,i=e.password,e=e.security,a=n[this.getEffectiveView()].wifisharing;a&&a.setValue({ssid:s,password:i,security:e})},getWifiInfo:function(){var e,s="on"===g.wireless24g.enable.getValue(),i=g.wireless24g.ssid.getValue(),a=g.wireless24g.encryption.getValue();switch(g.wireless24g.encryption.getValue()){case w.su.securityCode.no_security:e="";break;case w.su.securityCode.psk_aes:case w.su.securityCode.psk_aes_tkip:case w.su.securityCode.psk_sae_personal:case w.su.securityCode.psk_sae_personal_aes:e=g.wireless24g.pskKey.getValue();break;case w.su.securityCode.wpa_enterprise:case w.su.securityCode.wpa_enterprise_tkip:e=g.wireless24g.wpaKey.getValue()}return{enable:s,ssid:i,password:e,security:a}},setEnableLabel:function(e){e?(g.wireless24g.enable.setLabelField(w.su.CHAR.WIRELESS_SETTINGS.WIRELESS_RADIO),i.device.getConfig().supportWifi6E&&!s.isTriband&&g.wireless24g.enable.setLabelField(w.su.CHAR.WIRELESS_SETTINGS.MODE_2G_5G),i.device.getConfig().supportWifi6E&&s.isTriband&&g.wireless24g.enable.setLabelField(w.su.CHAR.WIRELESS_SETTINGS.MODE_2G_5G1_5G2)):g.wireless24g.enable.setLabelField(w.su.CHAR.WIRELESS_SETTINGS.MODE_2G)},syncMainModel:function(){var e,s=g.wireless24g.getData("submit",!0),i=[];for(e in s)i.push(e);for(var a=0;a<i.length;a++){var n=s[i[a]];s["wireless_2g_"+i[a]]=n,delete s[i[a]]}return s},getHwMode:function(){return g.wireless24g.hwmode.getValue()}}})}(jQuery),$.su.modelManager.define("ffsModel",{type:"model",fields:[{name:"enable"}],proxy:{url:$.su.url("/admin/ffs?form=config")}}),$.su.modelManager.define("wireless24g",{type:"model",fields:[{name:"enable",mapping:"enable"},{name:"disabled_all"},{name:"disabled_by",disabled:!0},{name:"ssid",mapping:"ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"hidden",mapping:"hidden"},{name:"encryption",mapping:"encryption",allowBlank:!1},{name:"pskKey",mapping:"psk_key",allowBlank:!1,vtype:"psk_password"},{name:"server",mapping:"server",vtype:"ip",allowBlank:!1},{name:"port",mapping:"port",vtype:{vtype:"number",min:1,max:65535},allowBlank:!1},{name:"wpaKey",mapping:"wpa_key",vtype:"password",maxLength:64,allowBlank:!1},{name:"hwmode",mapping:"hwmode"},{name:"htmode",mapping:"htmode"},{name:"channel",mapping:"channel"},{name:"txpower",mapping:"txpower"},{name:"disabled",mapping:"disabled",disabled:!0},{name:"mimo",mapping:"mu_mimo"}],convert:function(e){var s,i=!0;for(s in $.su.securityCode)$.su.securityCode[s]==e.encryption&&(i=!1);i&&(e.encryption="");var a=e.hwmode,n=e.capability&&e.capability.channel_2g,r=e.channel;if(n)switch(n&&13<n.length&&(n=function(e,s){if(!e)return[];var i=[],a=(i[0]={name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},e.length);if(!(s%20))for(var n=-1,r=0,l=0;l<=a;l++){var t={},o=parseInt(e[l]);if(n<0||n+4==o)r+=20;else{for(;r%s;)i.pop(),r-=20;if(isNaN(o))break;r=20}t.name=n=o,t.value=o,i.push(t)}return i}(n,20),"b"!=a&&n.pop(),!function(e,s){for(var i=s.length,a=0;a<i;a++)if(e==s[a].value)return 1;return}(r,n))&&(e.channel="auto"),a){case"b":case"g":case"bg":e.htmode="auto"}return e},proxy:"wirelessModule24gProxy"}),$.su.define("wirelessModule24gProxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=wireless_2g"),writeFilter:function(e){return{operation:"read_spf"}},sync:function(e){var s=e.operation,i=this,a=e.success;"read"===s?this.read.call(this,$.extend({},e,{success:function(s){i.read.call(i,$.extend({},e,{success:function(e){e=$.extend(s,e);i.trigger("ev_load",[e]),a.call(i,e)},url:$.su.url("/admin/wireless?form=region")}),!1)}}),!1):this.write.apply(this,[e])}}),$.su.modelManager.define("wireless24gControl",{type:"model",fields:[{name:"totalField"},{name:"editField"},{name:"wpaPersonal24g"},{name:"wpa3Personal24g"},{name:"wpaEnterprise24g"},{name:"wep24g"}]}),$.su.storeManager.define("hwmode2gStore",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("htmode2gStore",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("channel2gStore",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.define("sysWireless2gProxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=syspara_2g"),readFilter:function(e){return void 0!==(e=e.data)&&{ENABLE:e.enable}}}),function(w){w.su.moduleManager.define("wirelessAdv5g1",{services:["moduleManager","ajax","device"],stores:["encryptionStore","wirelessVersionStore","wirelessVersionEpStore","wirelessCipherStore","wirelessWpa3VersionStore","wireless5gWpa3CipherStore","wepTypeStore","wepKeySelectedStore","wepKeyFormatStore","wepKeyTypeStore","transPowerStore","hwmode5g1Store","htmode5g1Store","channel5g1Store"],models:["wireless5g1","wireless5g1Control","regionWirelessCapabilityModel","quickSetupModel"],deps:["utils","wirelessSettings"],views:["wirelessAdv5g1View","wirelessAdv5g1ViewBasic","wirelessAdv5g1ViewQs"],listeners:{ev_on_launch:function(e,s,i,a,n,r,l){s.handleRegionInfo(),s.dfd=w.Deferred(),a.wireless5g1.load({success:function(){s.dfd.resolve()}})},ev_before_destroy:function(){}},init:function(a,e,n,s,r,l){this.listen({"models.wireless5g1.enable":{ev_value_change:function(e,s,i){"on"===s?(this.disableAll=!1,n.wireless5g1Control.editField.show(),w.inArray("5g1",l.device.getConfig().supportMUMIMO)<0&&(n.wireless5g1.mimo.hide(),n.wireless5g1.mimo.disable()),!0===l.device.getConfig().supportOfdmaMumimo&&n.wireless5g1.mimo.hide()):(this.disableAll=!0,n.wireless5g1Control.editField.hide()),i&&r.wirelessSettings.modeChangeSet()}},"models.wireless5g1.encryption":{ev_value_change:function(e,s,i){switch(n.wireless5g1Control.wpaPersonal5g1.hide(),n.wireless5g1Control.wpaEnterprise5g1.hide(),s){case w.su.securityCode.no_security:n.wireless5g1Control.wpaPersonal5g1.hide(),n.wireless5g1Control.wpaEnterprise5g1.hide();break;case w.su.securityCode.psk_aes:case w.su.securityCode.psk_aes_tkip:n.wireless5g1.pskKey.setVtype("psk_password"),n.wireless5g1Control.wpaPersonal5g1.show(),n.wireless5g1Control.wpaEnterprise5g1.hide();break;case w.su.securityCode.psk_sae_personal:case w.su.securityCode.psk_sae_personal_aes:n.wireless5g1.pskKey.setVtype("wpa3_password"),n.wireless5g1Control.wpaPersonal5g1.show(),n.wireless5g1Control.wpaEnterprise5g1.hide();break;case w.su.securityCode.wpa_enterprise:case w.su.securityCode.wpa_enterprise_tkip:n.wireless5g1Control.wpaEnterprise5g1.show(),n.wireless5g1Control.wpaPersonal5g1.hide()}s==w.su.securityCode.psk_aes_tkip||s==w.su.securityCode.wpa_enterprise_tkip?n.wireless5g1.hwmode.disableItems(["ax_5"]):n.wireless5g1.hwmode.enableItems(["ax_5"]),s==w.su.securityCode.no_security||s==w.su.securityCode.psk_aes_tkip?n.wireless5g1.encryption.setTips(w.su.CHAR.WIRELESS_SETTINGS.NOT_CONSIDERED_TIP):n.wireless5g1.encryption.setTips("")}},"models.wireless5g1.hwmode":{ev_value_change:function(e,s,i){switch(s){case"a_5":n.wireless5g1.htmode.disableItems(["40"]),n.wireless5g1.htmode.disableItems(["80"]),n.wireless5g1.htmode.setValue("auto"),n.wireless5g1.htmode.hide();break;case"n_5":case"an_5":var a=n.wireless5g1.htmode.getValue();n.wireless5g1.htmode.enableItems(["40"]),n.wireless5g1.htmode.disableItems(["80"]),"80"==a&&n.wireless5g1.htmode.setValue("auto"),n.wireless5g1.htmode.show();break;default:n.wireless5g1.htmode.enableItems(["40"]),n.wireless5g1.htmode.enableItems(["80"]),n.wireless5g1.htmode.show()}"ax_5"==s?n.wireless5g1.encryption.disableItems([w.su.securityCode.psk_aes_tkip,w.su.securityCode.wpa_enterprise_tkip]):n.wireless5g1.encryption.enableItems([w.su.securityCode.psk_aes_tkip,w.su.securityCode.wpa_enterprise_tkip]),i&&!0===l.device.getConfig().supportOfdmaMumimo&&r.wirelessSettings.modeChangeSet()}},"models.wireless5g1.htmode":{ev_value_change:function(e,s,i){a.set160MhzTips(),a.resetChannel(s)}},"models.wireless5g1.channel":{ev_value_change:function(e,s,i){a.set160MhzTips()}},"models.wireless5g1":{ev_loaded:function(e,s){l.ajax.request({proxy:"sysWireless5g1Proxy",data:{operation:"read"},success:function(e){e&&n.wireless5g1&&n.wireless5g1.channel&&("on"==e.ENABLE?n.wireless5g1.channel.disable():n.wireless5g1.channel.enable())}}),a.resetChannel(s.htmode),this.syncWifiSharingData()},ev_model_submit:function(e,s){this.syncWifiSharingData()},ev_will_auto_save:function(e,s){s.preventDefault()}}})}},function(n,r,d,g,u,l){var t=[52,56,60,64,100,104,108,112,116,120,124,128,132,136,140,144];return{dfd:null,SYS_WIRELESS_5G1_URL:w.su.url("/admin/wireless?form=syspara_5g"),onDestroy:function(){var e=l.moduleManager.get("wirelessSettings");e&&e.off("ev_region_reload",n.handleRegionInfo)},handleRegionInfo:function(){var e=d.regionWirelessCapabilityModel.channel5g.getValue();if(u.utils.isEmptyObject(e))d.wireless5g1Control.totalField.hide();else{d.wireless5g1Control.totalField.show();var s=d.regionWirelessCapabilityModel.hwmode5g.getValue();if(s){for(var i=[],a=s.length,n=0;n<a;n++){var r={},l="MODE_"+s[n].toUpperCase();r.name=w.su.CHAR.WIRELESS_SETTINGS[l],r.value=s[n],i.push(r)}g.hwmode5g1Store.loadData(i)}var t=d.regionWirelessCapabilityModel.htmode5g.getValue();if(t){for(var o=[],a=t.length,n=0;n<a;n++){r={};switch(t[n]){case"20":r.name="20"+w.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"40":r.name="20/40"+w.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"80":r.name="20/40/80"+w.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"160":r.name="20/40/80/160"+w.su.CHAR.WIRELESS_SETTINGS.MHZ;break;default:r.name=t[n]+w.su.CHAR.WIRELESS_SETTINGS.MHZ}r.value=t[n],o.push(r)}g.htmode5g1Store.loadData(o)}}},disableAll:!1,getHtChannel:function(e,s){if(!e)return[];var i=[],a=(i[0]={name:w.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},e.length);if(!(s%20))for(var n=-1,r=0,l=0;l<=a;l++){var t={},o=parseInt(e[l]);if(n<0||n+4==o)r+=20;else{for(;r%s;)i.pop(),r-=20;if(isNaN(o))break;r=20}t.name=n=o,t.value=o,i.push(t)}return i},get_ht_channel_160:function(e){for(var s=[],i=(s[0]={name:w.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},e.length),a=u.wirelessSettings.region,n=["AU","CA"].includes(a)?[36,40,44,48,52,56,60,64]:[36,40,44,48,52,56,60,64,100,104,108,112,116,120,124,128],r=0;r<=i;r++){var l={},t=parseInt(e[r]);-1<w.inArray(t,n)&&(l.name=t,l.value=t,s.push(l))}return s},channelDFS:function(e){for(var s=[],i=l.device.getConfig().country,a=0;a<e.length;a++)s.push(e[a]),t.includes(e[a].value)&&"RU"!=i&&(s[a].name+="(DFS)");return s},resetChannel:function(e){var s=d.regionWirelessCapabilityModel.channel5g.getValue(),i=d.wireless5g1.channel.getValue();switch(e){case"20":var a=n.getHtChannel(s,20);g.channel5g1Store.loadData(n.channelDFS(a)),u.utils.valInObjArr(i,a)?d.wireless5g1.channel.setValue(i):d.wireless5g1.channel.setValue("auto");break;case"40":a=n.getHtChannel(s,40);g.channel5g1Store.loadData(n.channelDFS(a)),u.utils.valInObjArr(i,a)?d.wireless5g1.channel.setValue(i):d.wireless5g1.channel.setValue("auto");break;case"80":a=n.getHtChannel(s,80);g.channel5g1Store.loadData(n.channelDFS(a)),u.utils.valInObjArr(i,a)?d.wireless5g1.channel.setValue(i):d.wireless5g1.channel.setValue("auto");break;case"160":a=n.get_ht_channel_160(s,160);g.channel5g1Store.loadData(n.channelDFS(a)),u.utils.valInObjArr(i,a)?d.wireless5g1.channel.setValue(i):d.wireless5g1.channel.setValue("auto")}},beforeSubmit:function(){var e=d.wireless5g1.server.getValue(),s=d.wireless5g1.encryption.getValue(),i=d.wireless5g1.enable.getValue();return d.wireless5g1.disabled_all.setValue(this.disableAll?"on":"off"),"on"==i&&"wpa"==s&&d.wireless5g1.server.setValidator(function(){return u.utils.ipToInt(e)!=u.utils.ipToInt(u.wirelessSettings.getLanIP())||w.su.CHAR.ERROR["00000077"]}),d.wireless5g1.validate()},syncWifiSharingData:function(){var e=this.getWifiInfo(),s=e.ssid,i=e.password,e=e.security,a=r[this.getEffectiveView()].wifisharing;a&&a.setValue({ssid:s,password:i,security:e})},getWifiInfo:function(){var e,s="on"===d.wireless5g1.enable.getValue(),i=d.wireless5g1.ssid.getValue(),a=d.wireless5g1.encryption.getValue();switch(d.wireless5g1.encryption.getValue()){case w.su.securityCode.no_security:e="";break;case w.su.securityCode.psk_aes:case w.su.securityCode.psk_aes_tkip:case w.su.securityCode.psk_sae_personal:case w.su.securityCode.psk_sae_personal_aes:e=d.wireless5g1.pskKey.getValue();break;case w.su.securityCode.wpa_enterprise:case w.su.securityCode.wpa_enterprise_tkip:e=d.wireless5g1.wpaKey.getValue()}return{enable:s,ssid:i,password:e,security:a}},syncMainModel:function(){var e,s=d.wireless5g1.getData("submit",!0),i=[];for(e in s)i.push(e);for(var a=0;a<i.length;a++){var n=s[i[a]];s["wireless_5g_"+i[a]]=n,delete s[i[a]]}return s},setEnableLabel:function(e){e?(d.wireless5g1Control.totalField.hide(),d.wireless5g1Control.channelField.show(),l.device.getIsTriband()?(d.wireless5g1.htmode.setLabelField(w.su.CHAR.WIRELESS_SETTINGS.CHANNEL_WIDTH_5G1),d.wireless5g1.channel.setLabelField(w.su.CHAR.WIRELESS_SETTINGS.CHANNEL_5G1)):(d.wireless5g1.htmode.setLabelField(w.su.CHAR.WIRELESS_SETTINGS.CHANNEL_WIDTH_5G),d.wireless5g1.channel.setLabelField(w.su.CHAR.WIRELESS_SETTINGS.CHANNEL_5G))):(d.wireless5g1Control.totalField.show(),d.wireless5g1Control.channelField.hide(),d.wireless5g1.htmode.setLabelField(w.su.CHAR.WIRELESS_SETTINGS.CHANNEL_WIDTH),d.wireless5g1.channel.setLabelField(w.su.CHAR.WIRELESS_SETTINGS.CHANNEL))},set5g1Name:function(){d.wireless5g1.enable.setLabelField(w.su.CHAR.WIRELESS_SETTINGS.MODE_5G)},getHwMode:function(){return d.wireless5g1.hwmode.getValue()},set160MhzTips:function(){var e=d.wireless5g1.htmode.getValue(),s="",i=-1<d.wireless5g1.channel.getText().search("DFS"),a=l.device.getConfig().supportOverlapWithDFS;(i||!a&&"160"==e)&&(s=w.su.CHAR.WIRELESS_SETTINGS.ENABLE_160_MHZ_NOTE_DFS),d.wireless5g1.channel.setTips(s)}}})}(jQuery),$.su.modelManager.define("wireless5g1",{type:"model",fields:[{name:"enable",mapping:"enable"},{name:"disabled_all"},{name:"disabled_by",disabled:!0},{name:"ssid",mapping:"ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"hidden",mapping:"hidden"},{name:"encryption",mapping:"encryption",allowBlank:!1},{name:"pskKey",mapping:"psk_key",allowBlank:!1,vtype:"psk_password"},{name:"server",mapping:"server",vtype:"ip",allowBlank:!1},{name:"port",mapping:"port",vtype:{vtype:"number",min:1,max:65535},allowBlank:!1},{name:"wpaKey",mapping:"wpa_key",vtype:"password",maxLength:64,allowBlank:!1},{name:"hwmode",mapping:"hwmode"},{name:"htmode",mapping:"htmode"},{name:"channel",mapping:"channel"},{name:"txpower",mapping:"txpower"},{name:"disabled",mapping:"disabled",disabled:!0},{name:"mimo",mapping:"mu_mimo"}],convert:function(e){var s,i,a,n=e.htmode,r=e.capability&&e.capability.channel_5g,l=e.channel,t=!0;for(a in $.su.securityCode)$.su.securityCode[a]==e.encryption&&(t=!1);t&&(e.encryption="");var o=e.hwmode,d=e.country.toUpperCase();if(r){switch(n){case"20":i(l,s(r,20))||(e.channel="80");break;case"40":i(l,s(r,40))||(e.channel="80");break;case"80":i(l,s(r,80))||(e.channel="80");break;case"160":i(l,function(e){for(var s,i=[],a=(i[0]={name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},e.length),n=["AU","CA"].includes(d)?[36,40,44,48,52,56,60,64]:[36,40,44,48,52,56,60,64,100,104,108,112,116,120,124,128],r=0;r<=a;r++){var l={};s=parseInt(e[r]),-1<$.inArray(s,n)&&(l.name=s,l.value=s,i.push(l))}return i}(r))||(e.channel="80")}switch(o){case"a_5":e.htmode="auto";break;case"n_5":case"an_5":"80"==n&&(e.htmode="auto")}"auto"==e.htmode&&(e.htmode="80")}return e;function s(e,s){if(!e)return[];var i=[],a=(i[0]={name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},e.length);if(!(s%20))for(var n=-1,r=0,l=0;l<=a;l++){var t={},o=parseInt(e[l]);if(n<0||n+4==o)r+=20;else{for(;r%s;)i.pop(),r-=20;if(isNaN(o))break;r=20}t.name=n=o,t.value=o,i.push(t)}return i}function i(e,s){for(var i=s.length,a=0;a<i;a++)if(e==s[a].value)return 1}},proxy:"wirelessModule5g1Proxy"}),$.su.define("wirelessModule5g1Proxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=wireless_5g"),writeFilter:function(e){return{operation:"read_spf"}},sync:function(e){var s=e.operation,i=this,a=e.success;"read"===s?this.read.call(this,$.extend({},e,{success:function(s){i.read.call(i,$.extend({},e,{success:function(e){e=$.extend(s,e);i.trigger("ev_load",[e]),a.call(i,e)},url:$.su.url("/admin/wireless?form=region")}),!1)}}),!1):this.write.apply(this,[e])}}),$.su.modelManager.define("wireless5g1Control",{type:"model",fields:[{name:"editField"},{name:"totalField"},{name:"wpaPersonal5g1"},{name:"wpa3Personal5g1"},{name:"wpaEnterprise5g1"},{name:"wep5g1"},{name:"channelField"}]}),$.su.storeManager.define("hwmode5g1Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("htmode5g1Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("channel5g1Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.define("sysWireless5g1Proxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=syspara_5g"),readFilter:function(e){return void 0!==(e=e.data)&&{ENABLE:e.enable}}}),function(w){w.su.moduleManager.define("wirelessAdv5g2",{services:["moduleManager","ajax","device"],stores:["encryptionStore","wirelessVersionStore","wirelessVersionEpStore","wirelessCipherStore","wirelessWpa3VersionStore","wireless5gWpa3CipherStore","wepTypeStore","wepKeySelectedStore","wepKeyFormatStore","wepKeyTypeStore","transPowerStore","hwmode5g2Store","htmode5g2Store","channel5g2Store"],models:["wireless5g2","wireless5g2Control","regionWirelessCapabilityModel","quickSetupModel"],deps:["utils","wirelessSettings"],views:["wirelessAdv5g2View","wirelessAdv5g2ViewBasic","wirelessAdv5g2ViewQs"],listeners:{ev_on_launch:function(e,s,i,a,n,r,l){s.handleRegionInfo(),s.dfd=w.Deferred(),a.wireless5g2.load({success:function(){s.dfd.resolve()}})},ev_before_destroy:function(){}},init:function(a,e,n,s,r,l){this.listen({"models.wireless5g2.enable":{ev_value_change:function(e,s,i){"on"===s?(this.disableAll=!1,n.wireless5g2Control.editField.show(),w.inArray("5g2",l.device.getConfig().supportMUMIMO)<0&&(n.wireless5g2.mimo.hide(),n.wireless5g2.mimo.disable()),!0===l.device.getConfig().supportOfdmaMumimo&&n.wireless5g2.mimo.hide()):(this.disableAll=!0,n.wireless5g2Control.editField.hide()),i&&r.wirelessSettings.modeChangeSet()}},"models.wireless5g2.encryption":{ev_value_change:function(e,s,i){switch(n.wireless5g2Control.wpaPersonal5g2.hide(),n.wireless5g2Control.wpaEnterprise5g2.hide(),s){case w.su.securityCode.no_security:n.wireless5g2Control.wpaPersonal5g2.hide(),n.wireless5g2Control.wpaEnterprise5g2.hide();break;case w.su.securityCode.psk_aes:case w.su.securityCode.psk_aes_tkip:n.wireless5g2.pskKey.setVtype("psk_password"),n.wireless5g2Control.wpaPersonal5g2.show(),n.wireless5g2Control.wpaEnterprise5g2.hide();break;case w.su.securityCode.psk_sae_personal:case w.su.securityCode.psk_sae_personal_aes:n.wireless5g2.pskKey.setVtype("wpa3_password"),n.wireless5g2Control.wpaPersonal5g2.show(),n.wireless5g2Control.wpaEnterprise5g2.hide();break;case w.su.securityCode.wpa_enterprise:case w.su.securityCode.wpa_enterprise_tkip:n.wireless5g2Control.wpaEnterprise5g2.show(),n.wireless5g2Control.wpaPersonal5g2.hide()}s==w.su.securityCode.psk_aes_tkip||s==w.su.securityCode.wpa_enterprise_tkip?n.wireless5g2.hwmode.disableItems(["ax_5"]):n.wireless5g2.hwmode.enableItems(["ax_5"]),s==w.su.securityCode.no_security||s==w.su.securityCode.psk_aes_tkip?n.wireless5g2.encryption.setTips(w.su.CHAR.WIRELESS_SETTINGS.NOT_CONSIDERED_TIP):n.wireless5g2.encryption.setTips("")}},"models.wireless5g2.hwmode":{ev_value_change:function(e,s,i){switch(s){case"a_5":n.wireless5g2.htmode.disableItems(["40"]),n.wireless5g2.htmode.disableItems(["80"]),n.wireless5g2.htmode.setValue("auto"),n.wireless5g2.htmode.hide();break;case"n_5":case"an_5":var a=n.wireless5g2.htmode.getValue();n.wireless5g2.htmode.enableItems(["40"]),n.wireless5g2.htmode.disableItems(["80"]),"80"==a&&n.wireless5g2.htmode.setValue("auto"),n.wireless5g2.htmode.show();break;default:n.wireless5g2.htmode.enableItems(["40"]),n.wireless5g2.htmode.enableItems(["80"]),n.wireless5g2.htmode.show()}"ax_5"==s?n.wireless5g2.encryption.disableItems([w.su.securityCode.psk_aes_tkip,w.su.securityCode.wpa_enterprise_tkip]):n.wireless5g2.encryption.enableItems([w.su.securityCode.psk_aes_tkip,w.su.securityCode.wpa_enterprise_tkip]),i&&!0===l.device.getConfig().supportOfdmaMumimo&&r.wirelessSettings.modeChangeSet()}},"models.wireless5g2.htmode":{ev_value_change:function(e,s,i){a.set160MhzTips(),a.resetChannel(s)}},"models.wireless5g2.channel":{ev_value_change:function(e,s,i){a.set160MhzTips()}},"models.wireless5g2":{ev_loaded:function(e,s){l.ajax.request({proxy:"sysWireless5g2Proxy",data:{operation:"read"},success:function(e){e&&n.wireless5g2&&n.wireless5g2.channel&&("on"==e.ENABLE?n.wireless5g2.channel.disable():n.wireless5g2.channel.enable())}}),a.resetChannel(s.htmode),this.syncWifiSharingData()},ev_model_submit:function(e,s){this.syncWifiSharingData()},ev_will_auto_save:function(e,s){s.preventDefault()}}})}},function(n,r,d,g,u,l){var t=[52,56,60,64,100,104,108,112,116,120,124,128,132,136,140,144];return{dfd:null,SYS_WIRELESS_5g2_URL:w.su.url("/admin/wireless?form=syspara_5g_2"),onDestroy:function(){var e=l.moduleManager.get("wirelessSettings");e&&e.off("ev_region_reload",n.handleRegionInfo)},handleRegionInfo:function(){var e=d.regionWirelessCapabilityModel.channel5g2.getValue();if(u.utils.isEmptyObject(e))d.wireless5g2Control.totalField.hide();else{d.wireless5g2Control.totalField.show();var s=d.regionWirelessCapabilityModel.hwmode5g2.getValue();if(s){for(var i=[],a=s.length,n=0;n<a;n++){var r={},l="MODE_"+s[n].toUpperCase();r.name=w.su.CHAR.WIRELESS_SETTINGS[l],r.value=s[n],i.push(r)}g.hwmode5g2Store.loadData(i)}var t=d.regionWirelessCapabilityModel.htmode5g2.getValue();if(t){for(var o=[],a=t.length,n=0;n<a;n++){r={};switch(t[n]){case"20":r.name="20"+w.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"40":r.name="20/40"+w.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"80":r.name="20/40/80"+w.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"160":r.name="20/40/80/160"+w.su.CHAR.WIRELESS_SETTINGS.MHZ;break;default:r.name=t[n]+w.su.CHAR.WIRELESS_SETTINGS.MHZ}r.value=t[n],o.push(r)}g.htmode5g2Store.loadData(o)}}},disableAll:!1,getHtChannel:function(e,s){if(!e)return[];var i=[],a=(i[0]={name:w.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},e.length);if(!(s%20))for(var n=-1,r=0,l=0;l<=a;l++){var t={},o=parseInt(e[l]);if(n<0||n+4==o)r+=20;else{for(;r%s;)i.pop(),r-=20;if(isNaN(o))break;r=20}t.name=n=o,t.value=o,i.push(t)}return i},get_ht_channel_160:function(e){for(var s=[],i=(s[0]={name:w.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},e.length),a=[36,40,44,48,52,56,60,64,100,104,108,112,116,120,124,128],n=0;n<=i;n++){var r={},l=parseInt(e[n]);-1<w.inArray(l,a)&&(r.name=l,r.value=l,s.push(r))}return s},channelDFS:function(e){for(var s=[],i=l.device.getConfig().country,a=0;a<e.length;a++)s.push(e[a]),t.includes(e[a].value)&&"RU"!=i&&(s[a].name+="(DFS)");return s},resetChannel:function(e){var s=d.regionWirelessCapabilityModel.channel5g2.getValue(),i=d.wireless5g2.channel.getValue();switch(e){case"20":var a=n.getHtChannel(s,20);g.channel5g2Store.loadData(n.channelDFS(a)),u.utils.valInObjArr(i,a)?d.wireless5g2.channel.setValue(i):d.wireless5g2.channel.setValue("auto");break;case"40":a=n.getHtChannel(s,40);g.channel5g2Store.loadData(n.channelDFS(a)),u.utils.valInObjArr(i,a)?d.wireless5g2.channel.setValue(i):d.wireless5g2.channel.setValue("auto");break;case"80":a=n.getHtChannel(s,80);g.channel5g2Store.loadData(n.channelDFS(a)),u.utils.valInObjArr(i,a)?d.wireless5g2.channel.setValue(i):d.wireless5g2.channel.setValue("auto");break;case"160":a=n.get_ht_channel_160(s,160);g.channel5g2Store.loadData(n.channelDFS(a)),u.utils.valInObjArr(i,a)?d.wireless5g2.channel.setValue(i):d.wireless5g2.channel.setValue("auto")}},beforeSubmit:function(){var e=d.wireless5g2.server.getValue(),s=d.wireless5g2.encryption.getValue(),i=d.wireless5g2.enable.getValue();return d.wireless5g2.disabled_all.setValue(this.disableAll?"on":"off"),"on"==i&&"wpa"==s&&d.wireless5g2.server.setValidator(function(){return u.utils.ipToInt(e)!=u.utils.ipToInt(u.wirelessSettings.getLanIP())||w.su.CHAR.ERROR["00000077"]}),d.wireless5g2.validate()},syncWifiSharingData:function(){var e=this.getWifiInfo(),s=e.ssid,i=e.password,e=e.security,a=r[this.getEffectiveView()].wifisharing;a&&a.setValue({ssid:s,password:i,security:e})},getWifiInfo:function(){var e,s="on"===d.wireless5g2.enable.getValue(),i=d.wireless5g2.ssid.getValue(),a=d.wireless5g2.encryption.getValue();switch(d.wireless5g2.encryption.getValue()){case w.su.securityCode.no_security:e="";break;case w.su.securityCode.psk_aes:case w.su.securityCode.psk_aes_tkip:case w.su.securityCode.psk_sae_personal:case w.su.securityCode.psk_sae_personal_aes:e=d.wireless5g2.pskKey.getValue();break;case w.su.securityCode.wpa_enterprise:case w.su.securityCode.wpa_enterprise_tkip:e=d.wireless5g2.wpaKey.getValue()}return{enable:s,ssid:i,password:e,security:a}},setEnableLabel:function(e){e?(d.wireless5g2Control.totalField.hide(),d.wireless5g2Control.channelField.show()):(d.wireless5g2Control.totalField.show(),d.wireless5g2Control.channelField.hide())},syncMainModel:function(){var e,s=d.wireless5g2.getData("submit",!0),i=[];for(e in s)i.push(e);for(var a=0;a<i.length;a++){var n=s[i[a]];s["wireless_5g_2_"+i[a]]=n,delete s[i[a]]}return s},getHwMode:function(){return d.wireless5g2.hwmode.getValue()},set160MhzTips:function(){var e=d.wireless5g2.htmode.getValue(),s="",i=-1<d.wireless5g2.channel.getText().search("DFS"),a=l.device.getConfig().supportOverlapWithDFS;(i||!a&&"160"==e)&&(s=w.su.CHAR.WIRELESS_SETTINGS.ENABLE_160_MHZ_NOTE_DFS),d.wireless5g2.channel.setTips(s)}}})}(jQuery),$.su.modelManager.define("wireless5g2",{type:"model",fields:[{name:"enable",mapping:"enable"},{name:"disabled_all"},{name:"disabled_by",disabled:!0},{name:"ssid",mapping:"ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"hidden",mapping:"hidden"},{name:"encryption",mapping:"encryption",allowBlank:!1},{name:"pskKey",mapping:"psk_key",allowBlank:!1,vtype:"psk_password"},{name:"server",mapping:"server",vtype:"ip",allowBlank:!1},{name:"port",mapping:"port",vtype:{vtype:"number",min:1,max:65535},allowBlank:!1},{name:"wpaKey",mapping:"wpa_key",vtype:"password",maxLength:64,allowBlank:!1},{name:"hwmode",mapping:"hwmode"},{name:"htmode",mapping:"htmode"},{name:"channel",mapping:"channel"},{name:"txpower",mapping:"txpower"},{name:"disabled",mapping:"disabled",disabled:!0},{name:"mimo",mapping:"mu_mimo"}],convert:function(e){var s,i=!0;for(s in $.su.securityCode)$.su.securityCode[s]==e.encryption&&(i=!1);i&&(e.encryption="");e.hwmode;var a=e.hwmode,n=e.htmode,r=e.channel,l=e.capability&&e.capability.channel_5g_2;if(l){switch(a){case"a_5":e.htmode="auto";break;case"n_5":case"an_5":"80"==n&&(e.htmode="auto")}switch(n){case"20":case"40":case"80":t(r,function(e,s){if(!e)return[];var i=[],a=(i[0]={name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},e.length);if(!(s%20))for(var n=-1,r=0,l=0;l<=a;l++){var t={},o=parseInt(e[l]);if(n<0||n+4==o)r+=20;else{for(;r%s;)i.pop(),r-=20;if(isNaN(o))break;r=20}t.name=n=o,t.value=o,i.push(t)}return i}(l,parseInt(n)))||(e.channel="80");break;case"160":t(r,function(e){for(var s,i=[],a=(i[0]={name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},e.length),n=[36,40,44,48,52,56,60,64,100,104,108,112,116,120,124,128],r=0;r<=a;r++){var l={};s=parseInt(e[r]),-1<$.inArray(s,n)&&(l.name=s,l.value=s,i.push(l))}return i}(l,parseInt(n)))||(e.channel="80")}"auto"==e.htmode&&(e.htmode="80")}return e;function t(e,s){for(var i=s.length,a=0;a<i;a++)if(e==s[a].value)return 1}},proxy:"wirelessModule5g2Proxy"}),$.su.define("wirelessModule5g2Proxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=wireless_5g_2"),writeFilter:function(e){return{operation:"read_spf"}},sync:function(e){var s=e.operation,i=this,a=e.success;"read"===s?this.read.call(this,$.extend({},e,{success:function(s){i.read.call(i,$.extend({},e,{success:function(e){e=$.extend(s,e);i.trigger("ev_load",[e]),a.call(i,e)},url:$.su.url("/admin/wireless?form=region")}),!1)}}),!1):this.write.apply(this,[e])}}),$.su.modelManager.define("wireless5g2Control",{type:"model",fields:[{name:"editField"},{name:"totalField"},{name:"wpaPersonal5g2"},{name:"wpa3Personal5g2"},{name:"wpaEnterprise5g2"},{name:"wep5g2"},{name:"channelField"}]}),$.su.storeManager.define("hwmode5g2Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("htmode5g2Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("channel5g2Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.define("sysWireless5g2Proxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=syspara_5g_2"),readFilter:function(e){return void 0!==(e=e.data)&&{ENABLE:e.enable}}}),function(g){g.su.moduleManager.define("wirelessAdv6g",{services:["moduleManager","ajax","device"],stores:["encryption6GStore","wirelessVersionStore","wirelessVersionEpStore","wirelessCipherStore","wirelessWpa3VersionStore","wireless5gWpa3CipherStore","wepTypeStore","wepKeySelectedStore","wepKeyFormatStore","wepKeyTypeStore","transPowerStore","hwmode6gStore","htmode6gStore","channel6gStore"],models:["wireless6g","wireless6gControl","regionWirelessCapabilityModel","quickSetupModel"],deps:["utils","wirelessSettings"],views:["wirelessAdv6gView","wirelessAdv6gViewBasic","wirelessAdv6gViewQs"],listeners:{ev_on_launch:function(e,s,i,a,n,r,l){s.handleRegionInfo(),s.dfd=g.Deferred(),a.wireless6g.load({success:function(){s.dfd.resolve()}})},ev_before_destroy:function(){}},init:function(n,a,r,e,l,t){this.listen({"models.wireless6g.enable":{ev_value_change:function(e,s,i){"on"===s?(this.disableAll=!1,r.wireless6gControl.editField.show(),g.inArray("6g",t.device.getConfig().supportMUMIMO)<0&&(r.wireless6g.mimo.hide(),r.wireless6g.mimo.disable()),!0===t.device.getConfig().supportOfdmaMumimo&&r.wireless6g.mimo.hide()):(this.disableAll=!0,r.wireless6gControl.editField.hide()),i&&l.wirelessSettings.modeChangeSet()}},"models.wireless6g.psc":{ev_value_change:function(e,s,i){var a=r.wireless6g.htmode.getValue();n.resetChannel(a,s)}},"models.wireless6g.htmode":{ev_value_change:function(e,s,i){null!==i&&n.resetChannel(s)}},"models.wireless6g":{ev_loaded:function(e,s){t.ajax.request({proxy:"sysWireless6gProxy",data:{operation:"read"},success:function(e){e&&r.wireless6g&&r.wireless6g.channel&&("on"==e.ENABLE?r.wireless6g.channel.disable():r.wireless6g.channel.enable(),r.wireless6g.hwmode.setValue("ax_5"),r.wireless6g.hwmode.record(),a.wirelessAdv6gViewBasic.hwmodeShow.setValue(g.su.CHAR.WIRELESS_SETTINGS.MODE_AX_5),a.wirelessAdv6gView.hwmodeShow.setValue(g.su.CHAR.WIRELESS_SETTINGS.MODE_AX_5))}}),n.resetChannel(s.htmode),this.syncWifiSharingData()},ev_model_submit:function(e,s){this.syncWifiSharingData()},ev_will_auto_save:function(e,s){s.preventDefault()}},"models.wireless6g.encryption":{ev_value_change:function(e,s,i){switch(r.wireless6gControl.wpa3Personal6g.hide(),r.wireless6gControl.wpaEnterprise6g.hide(),r.wireless6gControl.wep6g.hide(),s){case"psk_sae":r.wireless6g.encryption.setTips(""),r.wireless6gControl.wpa3Personal6g.show(),r.wireless6g.pskCipher.hide(),r.wireless6g.pskVersion.setValue("sae_only"),r.wireless6g.pskVersion.record(),a.wirelessAdv6gView.pskVersionShow.setValue(g.su.CHAR.WIRELESS_SETTINGS.WPA3_SAE),r.wireless6g.pskKey.setVtype("wpa3_password");break;case"owe":r.wireless6g.encryption.setTips(g.su.CHAR.WIRELESS_SETTINGS.NOT_CONSIDERED_TIP),r.wireless6g.pskVersion.setValue("owe_only")}n.setWpa3VersionTip()}},"models.wireless6g.hwmode":{ev_value_change:function(e,s,i){i&&!0===t.device.getConfig().supportOfdmaMumimo&&l.wirelessSettings.modeChangeSet()}}})}},function(r,l,t,o,d,s){return{dfd:null,SYS_WIRELESS_6g_URL:g.su.url("/admin/wireless?form=syspara_6g"),onDestroy:function(){var e=s.moduleManager.get("wirelessSettings");e&&e.off("ev_region_reload",r.handleRegionInfo)},handleRegionInfo:function(){var e=t.regionWirelessCapabilityModel.channel6g.getValue();if(d.utils.isEmptyObject(e))t.wireless6gControl.totalField.hide();else{t.wireless6gControl.totalField.show();var s=t.regionWirelessCapabilityModel.htmode6g.getValue();if(s){for(var i=[],a=s.length,n=0;n<a;n++){var r={};switch(s[n]){case"80":r.name="20/40/80"+g.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"160":r.name="20/40/80/160"+g.su.CHAR.WIRELESS_SETTINGS.MHZ;break;default:r.name=s[n]+g.su.CHAR.WIRELESS_SETTINGS.MHZ}r.value=s[n],i.push(r)}o.htmode6gStore.loadData(i)}}},disableAll:!1,getHtChannel:function(e,s){if(!e)return[];var i=[];switch(s){case"auto":case"20":break;case"40":0<=e.indexOf("233")&&e.splice(e.indexOf("233"),1);break;case"80":case"160":0<=e.indexOf("225")&&e.splice(e.indexOf("225"),1),0<=e.indexOf("229")&&e.splice(e.indexOf("229"),1),0<=e.indexOf("233")&&e.splice(e.indexOf("233"),1)}for(var a=0;a<e.length;a++){var n={},r=parseInt(e[a]);n.name=r,n.value=r,i.push(n)}return i},channelDFSandPSC:function(e){var s=[];s[0]={name:g.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"};for(var i=0;i<e.length;i++)e[i].value=parseInt(e[i].value),5!=e[i].value&&21!=e[i].value&&37!=e[i].value&&53!=e[i].value&&69!=e[i].value&&85!=e[i].value&&101!=e[i].value&&117!=e[i].value&&133!=e[i].value&&149!=e[i].value&&165!=e[i].value&&181!=e[i].value&&197!=e[i].value&&213!=e[i].value&&229!=e[i].value||(e[i].name+="(PSC)"),s.push(e[i]);return s},channelPSC:function(e){var s=[];s[0]={name:g.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"};for(var i=0;i<e.length;i++){var a=parseInt(e[i].value);37!=a&&53!=a&&69!=a&&85!=a&&101!=a&&117!=a&&133!=a&&149!=a&&165!=a&&181!=a&&197!=a&&213!=a&&229!=a||s.push({name:e[i].name+"(PSC)",value:parseInt(e[i].value)})}return s},resetChannel:function(e,s){var i=t.regionWirelessCapabilityModel.channel6g.getValue(),a=t.wireless6g.channel.getValue(),s=s||t.wireless6g.psc.getValue(),n={},n=r.getHtChannel(i,e);n="on"==s?r.channelPSC(n):r.channelDFSandPSC(n),o.channel6gStore.loadData(n),d.utils.valInObjArr(a,n)?t.wireless6g.channel.setValue(a):t.wireless6g.channel.setValue("auto")},setWepEncrpyVtype:function(){var e,s=t.wireless6g.wepFormat1.getValue(),i=t.wireless6g.wepType1.getValue();"asic"==s?"64"==i?e="asic_64":"128"==i&&(e="asic_128"):"hex"==s&&("64"==i?e="hex_64":"128"==i&&(e="hex_128")),t.wireless6g.wepKey1.setVtype(e)},beforeSubmit:function(){var e=t.wireless6g.server.getValue(),s=t.wireless6g.encryption.getValue(),i=t.wireless6g.enable.getValue();return t.wireless6g.disabled_all.setValue(this.disableAll?"on":"off"),"on"==i&&"wpa"==s?t.wireless6g.server.setValidator(function(){return d.utils.ipToInt(e)!=d.utils.ipToInt(d.wirelessSettings.getLanIP())||g.su.CHAR.ERROR["00000077"]}):"on"==i&&"wep"==s&&r.setWepEncrpyVtype(),t.wireless6g.validate()},syncQsData:function(){var e=t.wireless6g.getData();return!(!t.wireless6g.pskKey.validate()||!t.wireless6g.ssid.validate()||(t.quickSetupModel.replaceData({wireless6gEnable:e.enable,wireless6gSsid:e.ssid,wireless6gEncryPassword:e.pskKey,wireless6gDisabledAll:"on"===e.enable?"off":"on",wireless6gregionEnable:"on"}),e.pskKey?t.quickSetupModel.replaceData({wireless6gPskKey:e.pskKey,wireless6gEncryption:"psk_sae",wireless6gPskVersion:"sae_only",wireless6gPskCipher:"auto"}):t.quickSetupModel.replaceData({wireless6gEncryption:"none"}),0))},isQsDirty:function(){for(var e=t.wireless6g,s=[e.enable,e.ssid,e.pskKey],i=0,a=s.length;i<a;i++)if(s[i].isDirty())return!0},syncWifiSharingData:function(){var e=this.getWifiInfo(),s=e.ssid,i=e.password,a=e.security,n=l[this.getEffectiveView()].wifisharing;n&&n.setValue({ssid:s,password:i,security:a,pskVersion:e.pskVersion})},getWifiInfo:function(){var e,s,i,a="on"===t.wireless6g.enable.getValue(),n=t.wireless6g.ssid.getValue();switch(t.wireless6g.encryption.getValue()){case"psk_sae":e=t.wireless6g.pskKey.getValue(),s="psk_sae",i=t.wireless6g.pskVersion.getValue();break;case"owe":e="",s="owe";break;default:e="",s="none"}return{enable:a,ssid:n,password:e,security:s,pskVersion:i}},syncMainModel:function(){var e,s=t.wireless6g.getData("submit",!0),i=[];for(e in s)i.push(e);for(var a=0;a<i.length;a++){var n=s[i[a]];s["wireless_6g_"+i[a]]=n,delete s[i[a]]}return"owe"==s.wireless_6g_encryption?s["wireless_6g_psk_version"]="owe_only":"psk_sae"==s.wireless_6g_encryption&&(s["wireless_6g_psk_version"]="sae_only"),s},dataChangeOn24g:function(e,s){e!==undefined?(l.wirelessAdv6gViewQs.wirelessQsAll.disable(),currentSsid=t.wireless6g.ssid.getValue(),t.wireless6g.ssid.setValue(e),t.wireless6g.pskKey.setValue(s)):l.wirelessAdv6gViewQs.wirelessQsAll.enable()},disableQsAll:function(){l.wirelessAdv6gViewQs.wirelessQsAll.disable()},getHwMode:function(){return t.wireless6g.hwmode.getValue()},getWirelessEnable:function(){return t.wireless6g.enable.getValue()},setWpa3VersionTip:function(){var e=t.wireless6g.encryption.getValue(),s=t.wireless6g.pskVersion.getValue();"psk_sae"==e&&"sae_only"==s?t.wireless6g.pskVersion.setTips(g.su.CHAR.WIRELESS_SETTINGS.VERSION_TIP):t.wireless6g.pskVersion.setTips("")}}})}(jQuery),$.su.modelManager.define("wireless6g",{type:"model",fields:[{name:"enable",mapping:"enable"},{name:"disabled_all"},{name:"disabled_by",disabled:!0},{name:"ssid",mapping:"ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"hidden",mapping:"hidden"},{name:"encryption",mapping:"encryption"},{name:"pskVersion",mapping:"psk_version"},{name:"pskCipher",mapping:"psk_cipher"},{name:"pskKey",mapping:"psk_key",allowBlank:!1,vtype:"psk_password"},{name:"wpaVersion",mapping:"wpa_version"},{name:"wpaCipher",mapping:"wpa_cipher"},{name:"server",mapping:"server",vtype:"ip",allowBlank:!1},{name:"port",mapping:"port",vtype:{vtype:"number",min:1,max:65535},allowBlank:!1},{name:"wpaKey",mapping:"wpa_key",vtype:"password",maxLength:64,allowBlank:!1},{name:"wepMode",mapping:"wep_mode"},{name:"wepFormat1",mapping:"wep_format1"},{name:"wepType1",mapping:"wep_type1"},{name:"wepKey1",mapping:"wep_key1",allowBlank:!1},{name:"hwmode",mapping:"hwmode"},{name:"htmode",mapping:"htmode"},{name:"channel",mapping:"channel"},{name:"txpower",mapping:"txpower"},{name:"disabled",mapping:"disabled",disabled:!0},{name:"psc",mapping:"psc"},{name:"mimo",mapping:"mu_mimo"}],convert:function(e){var s=e.encryption,i=e.psk_cipher,a=e.hwmode,n=e.wpa_cipher,r=e.hwmode,l=e.htmode,t=e.channel,o=e.capability&&e.capability.channel_6g;if(o){switch(s){case"psk":"tkip"!=i||"n_5"!=a&&"ac_5"!=a&&"nac_5"!=a||(e.psk_cipher="auto");break;case"wpa":"tkip"!=n||"n_5"!=a&&"ac_5"!=a&&"nac_5"!=a||(e.wpa_cipher="auto")}switch(r){case"a_5":e.htmode="auto";break;case"n_5":case"an_5":"80"==l&&(e.htmode="auto")}switch(l){case"auto":l="20";case"20":case"40":case"80":case"160":!function(e,s){for(var i=s.length,a=0;a<i;a++)if(e==s[a].value)return 1;return}(t,function(e,s){if(!e)return[];var i=[];switch(i[0]={name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},s){case"20":break;case"40":0<=e.indexOf("233")&&e.splice(e.indexOf("233"),1);break;case"80":case"160":0<=e.indexOf("225")&&e.splice(e.indexOf("225"),1),0<=e.indexOf("229")&&e.splice(e.indexOf("229"),1),0<=e.indexOf("233")&&e.splice(e.indexOf("233"),1)}for(var a=0;a<e.length;a++){var n={},r=parseInt(e[a]);n.name=r,n.value=r,i.push(n)}return i}(o,l))&&(e.channel="auto")}}return e},proxy:"wirelessModule6gProxy"}),$.su.define("wirelessModule6gProxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=wireless_6g"),sync:function(e){var s=e.operation,i=this,a=e.success;"read"===s?this.read.call(this,$.extend({},e,{success:function(s){i.read.call(i,$.extend({},e,{success:function(e){e=$.extend(s,e);i.trigger("ev_load",[e]),a.call(i,e)},url:$.su.url("/admin/wireless?form=region")}),!1)}}),!1):this.write.apply(this,[e])}}),$.su.modelManager.define("wireless6gControl",{type:"model",fields:[{name:"editField"},{name:"totalField"},{name:"wpa3Personal6g"},{name:"wpaEnterprise6g"},{name:"wep6g"}]}),$.su.storeManager.define("hwmode6gStore",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("htmode6gStore",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("channel6gStore",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.define("sysWireless6gProxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=syspara_6g"),readFilter:function(e){return void 0!==(e=e.data)&&{ENABLE:e.enable}}}),function(f){f.su.moduleManager.define("wirelessAdvSmartConn",{services:["device","ajax","moduleManager"],models:["wirelessSmartConn","wirelessSmartConnView","wirelessSmartConnEdit","wireless24g","wireless5g1","wireless5g2"],stores:["transPowerStore","encryptionStore","wirelessVersionStore","wirelessVersionEpStore","wirelessCipherStore","wirelessWpa3VersionStore","wireless24gWpa3CipherStore","wepTypeStore","wepKeySelectedStore","wepKeyFormatStore","wepKeyTypeStore"],deps:["wirelessSettings","utils"],views:["wirelessAdvSmartConnView","wirelessAdvSmartConnViewBasic"],listeners:{ev_on_launch:function(e,s,i,a,n,r,l){s.isTriband=l.device.getIsTriband(),a.wirelessSmartConn.load(),a.wirelessSmartConnEdit.load()}},init:function(m,a,c,e,S,_){this.control({".index-common-save-btn":{ev_will_auto_save:function(e,s,i){for(var a,n,r,l,t,o,d,g=c.wirelessSmartConnEdit.encryption.getValue(),u=!1,w=0,p=i.length;w<p;w++)-1<i[w].dataObj.name.indexOf("wireless")&&(u=!0);u&&("on"===c.wirelessSmartConn.smartEnable.getValue()?("wpa"==g?(a=c.wirelessSmartConnEdit.server.getValue(),c.wirelessSmartConnEdit.server.setValidator(function(){return S.utils.ipToInt(a)!=S.utils.ipToInt(S.wirelessSettings.getLanIP())||f.su.CHAR.ERROR["00000077"]})):"wep"==g&&m.setWepEncrpyVtype(),c.wirelessSmartConnEdit.validate()&&m.postWirelessSmartData()):(n=_.moduleManager.get("wirelessAdv24g"),r=_.moduleManager.get("wirelessAdv5g1"),g="/admin/wireless?form=wireless_2g&form=wireless_5g",m.isTriband&&(l=_.moduleManager.get("wirelessAdv5g2"),g="/admin/wireless?form=wireless_2g&form=wireless_5g&form=wireless_5g_2"),n.beforeSubmit()&&r.beforeSubmit()&&(!l||l.beforeSubmit())&&(t=n.syncMainModel(),o=r.syncMainModel(),d=l&&l.syncMainModel(),1!=c.wirelessSmartConn.isDirty()&&c.wirelessSmartConn.submit(),_.ajax.request({url:f.su.url(g),data:f.extend(!0,{operation:"write"},t,o,d),success:function(){var e,s=n.getWifiInfo(),i=r.getWifiInfo();m.isTriband&&(e=l.getWifiInfo()),s.enable||i.enable||m.isTriband&&e.enable?(S.wirelessSettings.loadWifiInfo(s,i,e),S.wirelessSettings.showWlanOnSmartOffSaveNote()):S.wirelessSettings.showWlanOffSaveNote(),n.syncWifiSharingData(),r.syncWifiSharingData(),l&&l.syncWifiSharingData(),m.showSmartOffNote(),m.updateGuestNetwork(),c.wireless24g.record(),c.wireless5g1.record(),c.wireless5g2.record()}}))))}}}),this.listen({"models.wirelessSmartConn":{ev_will_auto_save:function(e,s){s.preventDefault()}},"models.wirelessSmartConn.smartEnable":{ev_value_change:function(e,s,i){"on"===s?(S.wirelessSettings.hideDetailFreqConfig(),c.wirelessSmartConnView.editField.show(),a[this.getEffectiveView()].wifisharing.show()):(S.wirelessSettings.showDetailFreqConfig(),c.wirelessSmartConnView.editField.hide(),a[this.getEffectiveView()].wifisharing.hide())}},"models.wirelessSmartConnEdit.encryption":{ev_value_change:function(e,s,i){switch(c.wirelessSmartConnView.pskEditField.hide(),c.wirelessSmartConnView.psk3EditField.hide(),c.wirelessSmartConnView.wpaEditField.hide(),c.wirelessSmartConnView.wepEditField.hide(),s){case"psk":c.wirelessSmartConnView.pskEditField.show(),c.wirelessSmartConnEdit.pskCipher.show();var a=c.wirelessSmartConnEdit.pskVersion.getValue();0<=f.inArray(a,["sae_transition","sae_only"])&&c.wirelessSmartConnEdit.pskVersion.setValue("auto"),c.wirelessSmartConnEdit.pskKey.setVtype("psk_password");break;case"psk_sae":c.wirelessSmartConnView.psk3EditField.show(),c.wirelessSmartConnEdit.pskCipher.hide();a=c.wirelessSmartConnEdit.pskVersion.getValue();f.inArray(a,["sae_transition","sae_only"])<0&&c.wirelessSmartConnEdit.pskVersion.setValue("sae_transition"),c.wirelessSmartConnEdit.pskKey.setVtype("wpa3_password");break;case"wpa":c.wirelessSmartConnView.wpaEditField.show();break;case"wep":c.wirelessSmartConnView.wepEditField.show()}}},"models.wirelessSmartConnEdit.pskVersion":{ev_value_change:function(e,s,i){var a=c.wirelessSmartConnEdit.encryption.getValue();"psk"==a&&"rsn"==s?(c.wirelessSmartConnEdit.pskCipher.hideItems("auto"),"auto"==c.wirelessSmartConnEdit.pskCipher.getValue()&&c.wirelessSmartConnEdit.pskCipher.setValue("aes")):"psk"==a&&"rsn"!=s&&c.wirelessSmartConnEdit.pskCipher.showItems("auto")}},"models.wirelessSmartConnEdit.wpaVersion":{ev_value_change:function(e,s,i){var a=c.wirelessSmartConnEdit.encryption.getValue();"wpa"==a&&"rsn"==s?(c.wirelessSmartConnEdit.wpaCipher.hideItems("auto"),"auto"==c.wirelessSmartConnEdit.wpaCipher.getValue()&&c.wirelessSmartConnEdit.wpaCipher.setValue("aes")):"wpa"==a&&"rsn"!=s&&c.wirelessSmartConnEdit.wpaCipher.showItems("auto")}},"models.wirelessSmartConnEdit":{ev_loaded:function(){this.syncWifiSharingData()},ev_will_auto_save:function(e,s){s.preventDefault()},ev_model_submit:function(e,s){var i=this.getWifiInfo(),a=i.password;this.syncWifiSharingData(),this.updateGuestNetwork(),"on"===c.wirelessSmartConnEdit.enable.getValue()?S.wirelessSettings.showWlanOnSaveNote(i.ssid,""===a?f.su.CHAR.WIRELESS_SETTINGS.NO_PASSWORD:a):S.wirelessSettings.showWlanOffSaveNote()}},"models.wireless24g":{ev_will_auto_save:function(e,s){s.preventDefault()}},"models.wireless5g1":{ev_will_auto_save:function(e,s){s.preventDefault()}},"models.wireless5g2":{ev_will_auto_save:function(e,s){s.preventDefault()}}})}},function(a,n,r,e,l,t){return{isTriband:!0,setWepEncrpyVtype:function(){var e,s=r.wirelessSmartConnEdit.wepFormat1.getValue(),i=r.wirelessSmartConnEdit.wepType1.getValue();"asic"==s?"64"==i?e="asic_64":"128"==i&&(e="asic_128"):"hex"==s&&("64"==i?e="hex_64":"128"==i&&(e="hex_128")),r.wirelessSmartConnEdit.wepKey1.setVtype(e)},postWirelessSmartData:function(){r.wirelessSmartConn.submit(),a.isTriband?r.wirelessSmartConnEdit.submit({url:f.su.url("/admin/wireless?form=wireless_2g&form=wireless_5g&form=wireless_5g_2")}):r.wirelessSmartConnEdit.submit({url:f.su.url("/admin/wireless?form=wireless_2g&form=wireless_5g")})},syncWifiSharingData:function(){var e=this.getWifiInfo(),s=e.ssid,i=e.password,e=e.security,a=n[this.getEffectiveView()].wifisharing;a&&a.setValue({ssid:s,password:i,security:e})},getWifiInfo:function(){var e,s,i=r.wirelessSmartConnEdit.ssid.getValue();switch(r.wirelessSmartConnEdit.encryption.getValue()){case"psk":e=r.wirelessSmartConnEdit.pskKey.getValue(),s="psk";break;case"psk_sae":e=r.wirelessSmartConnEdit.pskKey.getValue(),s="psk_sae";break;case"wpa":e=r.wirelessSmartConnEdit.wpaKey.getValue(),s="wpa";break;case"wep":e=r.wirelessSmartConnEdit.wepKey1.getValue(),s="wep";break;default:e="",s="none"}return{ssid:i,password:e,security:s}},showSmartOffNote:function(){var e,s=t.moduleManager.get("wirelessAdv24g"),i=t.moduleManager.get("wirelessAdv5g1"),s=s.getWifiInfo(),i=i.getWifiInfo();a.isTriband&&(e=t.moduleManager.get("wirelessAdv5g2").getWifiInfo()),s.enable||i.enable||a.isTriband&&e.enable?(l.wirelessSettings.loadWifiInfo(s,i,e),l.wirelessSettings.showWlanOnSmartOffSaveNote()):l.wirelessSettings.showWlanOffSaveNote()},updateGuestNetwork:function(){"basic"==t.moduleManager.get("wirelessSettings").getMode()&&t.moduleManager.get("guestNetworkModule").checkStatus()}}})}(jQuery),$.su.modelManager.define("wirelessSmartConn",{type:"model",fields:[{name:"smartEnable",mapping:"smart_enable"}],proxy:{url:$.su.url("/admin/wireless?form=smart_connect")}}),$.su.modelManager.define("wirelessSmartConnEdit",{type:"model",fields:[{name:"isTriband"},{name:"2gEnable",mapping:"wireless_2g_enable"},{name:"5gEnable",mapping:"wireless_5g_enable"},{name:"5g2Enable",mapping:"wireless_5g_2_enable"},{name:"wireless2gSsid",mapping:"wireless_2g_ssid"},{name:"wireless5gSsid",mapping:"wireless_5g_ssid"},{name:"wireless5g2Ssid",mapping:"wireless_5g_2_ssid"},{name:"wireless2gHidden",mapping:"wireless_2g_hidden"},{name:"wireless5gHidden",mapping:"wireless_5g_hidden"},{name:"wireless5g2Hidden",mapping:"wireless_5g_2_hidden"},{name:"wireless2gEncryption",mapping:"wireless_2g_encryption"},{name:"wireless5gEncryption",mapping:"wireless_5g_encryption"},{name:"wireless5g2Encryption",mapping:"wireless_5g_2_encryption"},{name:"wireless2gPskVersion",mapping:"wireless_2g_psk_version"},{name:"wireless5gPskVersion",mapping:"wireless_5g_psk_version"},{name:"wireless5g2PskVersion",mapping:"wireless_5g_2_psk_version"},{name:"wireless2gPskCipher",mapping:"wireless_2g_psk_cipher"},{name:"wireless5gPskCipher",mapping:"wireless_5g_psk_cipher"},{name:"wireless5g2PskCipher",mapping:"wireless_5g_2_psk_cipher"},{name:"wireless2gPskKey",mapping:"wireless_2g_psk_key"},{name:"wireless5gPskKey",mapping:"wireless_5g_psk_key"},{name:"wireless5g2PskKey",mapping:"wireless_5g_2_psk_key"},{name:"wireless2gWpaVersion",mapping:"wireless_2g_wpa_version"},{name:"wireless5gWpaVersion",mapping:"wireless_5g_wpa_version"},{name:"wireless5g2WpaVersion",mapping:"wireless_5g_2_wpa_version"},{name:"wireless2gWpaCipher",mapping:"wireless_2g_wpa_cipher"},{name:"wireless5gWpaCipher",mapping:"wireless_5g_wpa_cipher"},{name:"wireless5g2WpaCipher",mapping:"wireless_5g_2_wpa_cipher"},{name:"wireless2gServer",mapping:"wireless_2g_server"},{name:"wireless5gServer",mapping:"wireless_5g_server"},{name:"wireless5g2Server",mapping:"wireless_5g_2_server"},{name:"wireless2gPort",mapping:"wireless_2g_port"},{name:"wireless5gPort",mapping:"wireless_5g_port"},{name:"wireless5g2Port",mapping:"wireless_5g_2_port"},{name:"wireless2gWpaKey",mapping:"wireless_2g_wpa_key"},{name:"wireless5gWpaKey",mapping:"wireless_5g_wpa_key"},{name:"wireless5g2WpaKey",mapping:"wireless_5g_2_wpa_key"},{name:"wireless2gWepMode",mapping:"wireless_2g_wep_mode"},{name:"wireless5gWepMode",mapping:"wireless_5g_wep_mode"},{name:"wireless5g2WepMode",mapping:"wireless_5g_2_wep_mode"},{name:"wireless2gWepFormat1",mapping:"wireless_2g_wep_format1"},{name:"wireless5gWepFormat1",mapping:"wireless_5g_wep_format1"},{name:"wireless5g2WepFormat1",mapping:"wireless_5g_2_wep_format1"},{name:"wireless2gWepType1",mapping:"wireless_2g_wep_type1"},{name:"wireless5gWepType1",mapping:"wireless_5g_wep_type1"},{name:"wireless5g2WepType1",mapping:"wireless_5g_2_wep_type1"},{name:"wireless2gWepKey1",mapping:"wireless_2g_wep_key1"},{name:"wireless5gWepKey1",mapping:"wireless_5g_wep_key1"},{name:"wireless5g2WepKey1",mapping:"wireless_5g_2_wep_key1"},{name:"wireless2gTxpower",mapping:"wireless_2g_txpower"},{name:"wireless5gTxpower",mapping:"wireless_5g_txpower"},{name:"wireless5g2Txpower",mapping:"wireless_5g_2_txpower"},{name:"wireless_2g_hwmode"},{name:"wireless_5g_hwmode"},{name:"wireless_5g_2_hwmode"},{name:"enable"},{name:"disabled_all"},{name:"ssid",mapping:"ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"hidden",mapping:"hidden"},{name:"encryption",mapping:"encryption"},{name:"pskVersion",mapping:"psk_version"},{name:"pskCipher",mapping:"psk_cipher"},{name:"pskKey",mapping:"psk_key",maxLength:64,vtype:"psk_password",allowBlank:!1},{name:"wpaVersion",mapping:"wpa_version"},{name:"wpaCipher",mapping:"wpa_cipher"},{name:"server",mapping:"server",vtype:"ip",allowBlank:!1},{name:"port",mapping:"port",vtype:{vtype:"number",min:1,max:65535},allowBlank:!1},{name:"wpaKey",mapping:"wpa_key",vtype:"password",maxLength:64,allowBlank:!1},{name:"wepMode",mapping:"wep_mode"},{name:"wepFormat1",mapping:"wep_format1"},{name:"wepType1",mapping:"wep_type1"},{name:"wepKey1",mapping:"wep_key1"},{name:"txpower",mapping:"txpower"}],serialize:function(e){var s,i,a,n,r=$.su.serviceManager.get("device").getIsTriband(),l="on"===e.enable?"off":"on";for(n in e){var t=e[n];0<=n.indexOf("wireless_")||(s="wireless_2g_"+n,i="wireless_5g_"+n,a="wireless_5g_2_"+n,t!==undefined&&null!==t?(e[s]=t,e[i]=t,r&&(e[a]=t)):(delete e[s],delete e[i],delete e[a]),"disabled_all"===n&&(e[s]=l,e[i]=l,r)&&(e[a]=l),delete e[n])}return e["wireless_2g_hwmode"]=$.su.modelManager.get("wireless24g").hwmode.getValue()||"bgnax",e["wireless_5g_hwmode"]=$.su.modelManager.get("wireless5g1").hwmode.getValue()||"anacax_5",r&&(e["wireless_5g_2_hwmode"]=$.su.modelManager.get("wireless5g2").hwmode.getValue()||"anacax_5"),e},proxy:{url:$.su.url("/admin/wireless?form=wireless_2g")}}),$.su.modelManager.define("wirelessSmartConnView",{type:"model",fields:[{name:"editField"},{name:"pskEditField"},{name:"psk3EditField"},{name:"wpaEditField"},{name:"wepEditField"}]}),$.su.define("sysWirelessAdv2gAnd5gProxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=wireless_2g&form=wireless_5g"),writeFilter:function(e){return $.extend({operation:"write"},e)}}),$.su.define("sysWirelessAdv2gAnd5g2Proxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=wireless_2g&form=wireless_5g&form=wireless_5g_2"),writeFilter:function(e){return $.extend({operation:"write"},e)}});