!function(c){c.su.moduleManager.define("wpsAP",{services:["ajax"],models:["wps","wpsPIN"],stores:["wpsPINStore"],views:["wpsAPView"],listeners:{ev_on_launch:function(e,s,n,t,w,i,p){s.init(),t.wps.load(),t.wpsPIN.load({success:function(){var e=t.wpsPIN.getData();n.wpsAPView.routerPINNote.setText(c.su.CHAR.WPS.ROUTER_PIN_NOTE.replace("%s",e.wpsPin))}}),s.control({"#wps-enable":{ev_view_change:function(){t.wps.submit()}},"#personal-device-PIN":{ev_textbox_blur:function(){var e=n.wpsAPView.personalDevicePIN.getValue(),e=s.checkClientPIN(e);1!=e&&n.wpsAPView.personalDevicePIN.setError(e)},ev_textbox_focus:function(){n.wpsAPView.personalDevicePIN.setNormal()}},"#wps-client-connect-btn":{ev_button_click:function(){var e=n.wpsAPView.personalDevicePIN.getValue(),t=s.checkClientPIN(e);1!=t?n.wpsAPView.personalDevicePIN.setError(t):(n.wpsAPView.wpsClientConnectBtn.hide(),n.wpsAPView.wpsClientCancelBtn.show(),n.wpsAPView.wpsClientConnectStatus.setLoading(c.su.CHAR.WPS.CONNECTING),n.wpsAPView.wpsClientConnectStatus.show(),p.ajax.request({proxy:"wpsPinStartProxy",data:{wpsPin:e},success:function(e){e=e.wpsTimeout;s.connect1(e)},fail:function(e){"error"==e.wpsStatus&&n.wpsAPView.wpsClientConnectStatus.setFailed(c.su.CHAR.WPS.CLIENT_PIN_ERROR)}}))}},"#wps-client-cancel-btn":{ev_button_click:function(){s.pinInterval&&clearInterval(s.pinInterval),p.ajax.request({proxy:"wpsPinCancelProxy"}),n.wpsAPView.wpsClientCancelBtn.hide(),n.wpsAPView.wpsClientConnectStatus.reset(),n.wpsAPView.wpsClientConnectStatus.hide(),n.wpsAPView.wpsClientConnectBtn.show()}},"#wps-router-get-new-pin-btn":{ev_button_click:function(){t.wpsPIN.getProxy().generate({success:function(e,t){n.wpsAPView.routerPINNote.setText(c.su.CHAR.WPS.ROUTER_PIN_NOTE.replace("%s",e.wpsPin))}})}},"#wps-router-default-btn":{ev_button_click:function(){t.wpsPIN.getProxy().getDefault({success:function(e,t){n.wpsAPView.routerPINNote.setText(c.su.CHAR.WPS.ROUTER_PIN_NOTE.replace("%s",e.wpsPin))}})}},"#wps-button":{ev_wps_button_click:function(e,t){"start"==t.clickType?p.ajax.request({proxy:"wpsButtonStartProxy",success:function(e){s.connect2(12e4)}}):(s.pcbInterval&&clearInterval(s.pcbInterval),n.wpsAPView.wpsButton.reset(),n.wpsAPView.wpsButtonConnectStatus.reset(),n.wpsAPView.wpsButtonConnectStatus.hide())}}}),s.listen({"models.wps.wps":{ev_value_change:function(e,t,s){"on"==t?n.wpsAPView.wpsContentWrapper.show():n.wpsAPView.wpsContentWrapper.hide()}}}),n.wpsAPView.personalDevicePIN.setMaxLength(8),n.wpsAPView.wpsClientCancelBtn.hide()}},init:function(e,t,s,n,w,i){}},function(e,o,a,t,s,u){return{init:function(){var t,s,n,w,i,p=1;o.wpsAPView.wpsNote.hide(),u.ajax.request({proxy:"wpsReadProxy",ajax:{"async":!1},success:function(e){void 0!==e&&(e.wpsTimeout,p=e.available,t=e.disabled,p?"on"==t?(o.wpsAPView.wpsNote.setText(c.su.CHAR.WPS.SWITCH_NOTE),o.wpsAPView.wpsNote.show()):(o.wpsAPView.wpsNote.setText(""),o.wpsAPView.wpsNote.hide()):("on"==t?o.wpsAPView.wpsNote.setText(c.su.CHAR.WPS.SWITCH_NOTE):o.wpsAPView.wpsNote.setText(c.su.CHAR.WPS.SWITCH_NOTE2),o.wpsAPView.wpsNote.show(),a.wps.wps.disable()))}}),u.ajax.request({proxy:"wireless2gProxy",ajax:{"async":!1},success:function(e){void 0!==e&&(s=e.disabled,n=e.disabledAll)}}),u.ajax.request({proxy:"wireless5gProxy",ajax:{"async":!1},success:function(e){void 0!==e&&(w=e.disabled,i=e.disabledAll)}}),"on"==s&&"on"==w||"on"==n&&"on"==i?(o.wpsAPView.wpsNote.setText(c.su.CHAR.WPS.SWITCH_NOTE3),o.wpsAPView.wpsNote.show(),a.wps.wps.disable(),o.wpsAPView.wpsContentWrapper.disable()):p||(a.wps.wps.disable(),o.wpsAPView.wpsContentWrapper.disable())},checkClientPIN:function(e){return""==e?c.su.CHAR.VTYPETEXT.BLANKTEXT:/[0-9]+/.test(e)?8==e.length||c.su.CHAR.WPS.PIN_8_NOTE:c.su.CHAR.VTYPETEXT.INVALIDTEXT},connect1:function(t){var s=this,n=0;s.pinInterval&&clearInterval(s.pinInterval),s.pinInterval=setInterval(function(){u.ajax.request({proxy:"wpsPinConnectProxy",success:function(e){n++,void 0!==e&&("success"==e.wpsStatus?(clearInterval(s.pinInterval),o.wpsAPView.wpsClientConnectStatus.setSuccess(c.su.CHAR.WPS.CLIENT_CONNECTED_SUCCESS.replace("%s",e.name)),o.wpsAPView.wpsClientCancelBtn.hide(),o.wpsAPView.wpsClientConnectBtn.show(),setTimeout(function(){o.wpsAPView.wpsClientConnectStatus.reset(),o.wpsAPView.wpsClientConnectStatus.hide()},3e3)):"ok"!=e.wpsStatus&&("error"==e.wpsStatus&&o.wpsAPView.wpsClientConnectStatus.setFailed(c.su.CHAR.WPS.CLIENT_PIN_ERROR),"failed"==e.wpsStatus&&o.wpsAPView.wpsClientConnectStatus.setFailed(c.su.CHAR.WPS.CLIENT_CONNECTED_ERROR),"overlap"==e.wpsStatus&&o.wpsAPView.wpsClientConnectStatus.setFailed(c.su.CHAR.WPS.CLIENT_CONNECTED_OVERLAP),"timeout"==e.wpsStatus&&o.wpsAPView.wpsClientConnectStatus.setFailed(c.su.CHAR.WPS.CLIENT_CONNECTED_TIMEOUT),"na"==e.wpsStatus&&o.wpsAPView.wpsClientConnectStatus.setFailed(c.su.CHAR.WPS.CLIENT_CONNECTED_INACT),clearInterval(s.pinInterval),o.wpsAPView.wpsClientCancelBtn.hide(),o.wpsAPView.wpsClientConnectBtn.show(),setTimeout(function(){o.wpsAPView.wpsClientConnectStatus.reset(),o.wpsAPView.wpsClientConnectStatus.hide()},3e3)),t/1e3<=n)&&s.pinInterval&&(clearInterval(s.pinInterval),n=0,o.wpsAPView.wpsClientConnectStatus.setFailed(c.su.CHAR.WPS.CLIENT_CONNECTED_NOT_FOUND),o.wpsAPView.wpsClientCancelBtn.hide(),o.wpsAPView.wpsClientConnectBtn.show(),setTimeout(function(){o.wpsAPView.wpsClientConnectStatus.reset(),o.wpsAPView.wpsClientConnectStatus.hide()},3e3))}})},1e3)},connect2:function(t){var s=this,n=0;s.pcbInterval&&clearInterval(s.pcbInterval),s.pcbInterval=setInterval(function(){u.ajax.request({proxy:"wpsButtonConnectProxy",success:function(e){n++,void 0!==e&&("success"==e.wpsStatus?(clearInterval(s.pcbInterval),o.wpsAPView.wpsButton.reset(),o.wpsAPView.wpsButtonConnectStatus.setSuccess(c.su.CHAR.WPS.CLIENT_CONNECTED_SUCCESS.replace("%s",e.name)),o.wpsAPView.wpsButtonConnectStatus.show(),setTimeout(function(){o.wpsAPView.wpsButtonConnectStatus.reset(),o.wpsAPView.wpsButtonConnectStatus.hide()},3e3)):"ok"!=e.wpsStatus&&("error"==e.wpsStatus&&o.wpsAPView.wpsButtonConnectStatus.setFailed(c.su.CHAR.WPS.CLIENT_PIN_ERROR),"failed"==e.wpsStatus&&o.wpsAPView.wpsButtonConnectStatus.setFailed(c.su.CHAR.WPS.CLIENT_CONNECTED_ERROR),"overlap"==e.wpsStatus&&o.wpsAPView.wpsButtonConnectStatus.setFailed(c.su.CHAR.WPS.CLIENT_CONNECTED_OVERLAP),"timeout"==e.wpsStatus&&o.wpsAPView.wpsButtonConnectStatus.setFailed(c.su.CHAR.WPS.CLIENT_CONNECTED_TIMEOUT),"na"==e.wpsStatus&&o.wpsAPView.wpsButtonConnectStatus.setFailed(c.su.CHAR.WPS.CLIENT_CONNECTED_INACT),clearInterval(s.pcbInterval),o.wpsAPView.wpsButton.reset(),o.wpsAPView.wpsButtonConnectStatus.show(),setTimeout(function(){o.wpsAPView.wpsButtonConnectStatus.reset(),o.wpsAPView.wpsButtonConnectStatus.hide()},3e3)),t/1e3<=n)&&s.pcbInterval&&(clearInterval(s.pcbInterval),n=0,o.wpsAPView.wpsButton.reset(),o.wpsAPView.wpsButtonConnectStatus.setFailed(c.su.CHAR.WPS.CLIENT_CONNECTED_NOT_FOUND),o.wpsAPView.wpsButtonConnectStatus.show(),setTimeout(function(){o.wpsAPView.wpsButtonConnectStatus.reset(),o.wpsAPView.wpsButtonConnectStatus.hide()},3e3))}})},1e3)}}})}(jQuery);