!function(t){t.su.modelManager.define("sysLogModel",{type:"model",fields:[{name:"type"},{name:"level"}],proxy:{url:t.su.url("/admin/syslog?form=filter")}}),t.su.modelManager.define("runningTimeModel",{type:"model",fields:[{name:"runningTime",mapping:"running_time"}],proxy:{url:"./data/runningTime.json"},convert:function(e){var n,a,r;return{running_time:(e=e.running_time,r=e,e=parseInt(e,10),isNaN(e)?r:(r="",n=parseInt(e/86400,10),a=parseInt(e%86400/3600,10),e=parseInt(e%3600/60,10),1===n?r=r+n+" "+t.su.CHAR.NETWORK_MAP.DAY+" ":1<n&&(r=r+n+" "+t.su.CHAR.NETWORK_MAP.DAYS+" "),(r=0<a?r+a+" "+t.su.CHAR.NETWORK_MAP.H+" ":r)+e+" "+t.su.CHAR.NETWORK_MAP.MIN))}}}),t.su.modelManager.define("saveLogModel",{type:"model",fields:[{name:"from",vtype:"email",allowBlank:!1,minLength:6,maxLength:128},{name:"auth"},{name:"username",mapping:"user",minLength:1,maxLength:96,vtype:"string_visible",allowBlank:!1},{name:"password",showLevel:!1,minLength:1,maxLength:32,vtype:"string_visible",allowBlank:!1},{name:"smtpServer",mapping:"smtp_server",allowBlank:!1,vtype:"string_ip_domain"},{name:"to",vtype:"email",allowBlank:!1,minLength:6,maxLength:128},{name:"autoMail",mapping:"auto_mail"},{name:"autoMailType",mapping:"auto_mail_type"},{name:"everyDayTime",mapping:"every_day_time"},{name:"everyHours",mapping:"every_hours",defaultValue:24,vtype:{vtype:"number",min:1,max:24}},{name:"mailAgain",mapping:"mail_again",defaultValue:3600,disabled:!0}],convert:function(e){var n,e=t.extend({},e),a=parseInt(e.mail_again,10);return isNaN(a)?e.mail_again="":(n=Math.floor(a/3600),a=Math.floor(a%3600/60),e.mail_again=t.su.CHAR.SYSTEM_LOG.MAIL_AGAIN_TIME.replace("%hour%",n).replace("%minute%",a)),e},proxy:{url:t.su.url("/admin/syslog?form=mail")}}),t.su.storeManager.define("logTypeStore",{type:"store",fields:[{name:"name"},{name:"value"}],proxy:{url:t.su.url("/admin/syslog?form=types")},convert:function(e){for(var n,a=0,r=e.length;a<r;a++)(n=t.su.CHAR.SYSTEM_LOG[e[a].name])&&(e[a].name=n);return e}}),t.su.storeManager.define("sysLogStore",{type:"store",fields:[{name:"time"},{name:"level"},{name:"type"},{name:"content"}],proxy:{url:t.su.url("/admin/syslog?form=log")}}),t.su.define("sysLogClearProxy",{extend:"IPFProxy",preventSuccessEvent:!0,url:t.su.url("/admin/syslog?form=log"),writeFilter:function(e){return t.extend({operation:"remove"},e)}}),t.su.storeManager.define("frequencyStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"selected"}],data:[{name:t.su.CHAR.SYSTEM_LOG.EVERY_DAY,value:"day_time",selected:!0},{name:t.su.CHAR.SYSTEM_LOG.AFTER_INTERVAL,value:"hours"}]}),t.su.define("sendMailProxy",{extend:"IPFProxy",preventSuccessEvent:!0,url:t.su.url("/admin/syslog?form=log"),writeFilter:function(e){return t.extend({operation:"mail"},e)}}),t.su.define("saveLogProxy",{extend:"IPFProxy",api:{upload:{url:t.su.url("/admin/syslog?form=save_log"),preventSuccessEvent:!0,data:{operation:"save"}}}})}(jQuery);