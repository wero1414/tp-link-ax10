!function(e){e.su.modelManager.define("diagnosticsModel",{type:"model",fields:[{name:"type"},{name:"ipaddr",allowBlank:!1,vtype:"string_ip_domain"},{name:"count",defaultValue:4,allowBlank:!1,vtype:{vtype:"number",min:1,max:50}},{name:"pktsize",defaultValue:64,allowBlank:!1,vtype:{vtype:"number",min:4,max:1472}},{name:"ttl",defaultValue:5,allowBlank:!1,vtype:{vtype:"number",min:1,max:30}},{name:"result"}],proxy:{url:e.su.url("/admin/diag?form=diag")}}),e.su.storeManager.define("diagnosticsResultStore",{type:"store",fields:[{name:"result"}],convert:function(e){for(var a=(e=e.replace(/!H(?=\u000a)/g,"")).split(/\u000a/),n=0,r=a.length;n<r;n++)a[n]={result:a[n]};return a}}),e.su.storeManager.define("diagnosticToolStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"selected"}],data:[{name:e.su.CHAR.DIAGNOSTICS.PING,value:0,selected:!0},{name:e.su.CHAR.DIAGNOSTICS.TRACEROUTE,value:1}]}),e.su.modelManager.define("portMirrorModel",{type:"model",fields:[{name:"enable"},{name:"mirroringPort",mapping:"mirroring_port"},{name:"from"}],convert:function(e){for(var a={enable:e.enable,mirroring_port:parseInt(e.mirroring_port,10),from:{}},n=1;;n++){var r=e["lan"+n];if(void 0===r)break;a.from["lan"+n]="1"===r?"on":"off"}return a},serialize:function(e){for(var a={enable:e.enable,mirroring_port:""+e.mirroring_port,from:{}},n=1;;n++){var r=e.from["lan"+n];if(void 0===r)break;a.from["lan"+n]="on"===r?"1":"0"}return a.from["wan"]="on"===e.from["wan"]?"1":"0",a},proxy:{url:e.su.url("/admin/diag?form=port_mirror")}}),e.su.storeManager.define("portReflectToStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"selected"},{name:"boxlabel"}],data:[{name:"lan1",boxlabel:e.su.CHAR.DIAGNOSTICS.LAN+1,value:"1"},{name:"lan2",boxlabel:e.su.CHAR.DIAGNOSTICS.LAN+2,value:"2"}]}),e.su.storeManager.define("portReflectFromStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"selected"},{name:"boxlabel"}],data:[{name:"lan1",boxlabel:e.su.CHAR.DIAGNOSTICS.LAN+1,value:"lan1"},{name:"lan2",boxlabel:e.su.CHAR.DIAGNOSTICS.LAN+2,value:"lan2"},{name:"wan",boxlabel:e.su.CHAR.DIAGNOSTICS.WAN,value:"wan"}]}),e.su.define("diagnosticsProxy",{extend:"IPFProxy",preventSuccessEvent:!0,url:e.su.url("/admin/diag?form=diag"),start:function(e){var a=e.data,n=parseInt(a.type,10);0===n?a.ipaddr_ping=a.ipaddr:1===n&&(a.ipaddr_trace=a.ipaddr),a.operation="start",this.read(e)},goAhead:function(e){e.data.operation="continue",this.read(e)},stop:function(e){e.data.operation="stop",this.read(e)}})}(jQuery);