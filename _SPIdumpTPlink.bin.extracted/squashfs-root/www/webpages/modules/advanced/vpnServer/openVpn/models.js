!function(t){t.su.modelManager.define("openVpnModel",{type:"model",fields:[{name:"enable",mapping:"enabled"},{name:"wan"},{name:"proto"},{name:"port",vtype:{vtype:"number",min:1024,max:65535},allowBlank:!1,defaultValue:1194},{name:"subnet",mapping:"serverip",vtype:"ip",allowBlank:!1,defaultValue:"10.8.0.0"},{name:"mask",vtype:"netmask",allowBlank:!1,defaultValue:"255.255.255.0"},{name:"connection",vtype:{vtype:"number",min:1,max:10},allowBlank:!1,defaultValue:10},{name:"access",allowBlank:!1},{name:"certExist",mapping:"cert_exist"}],proxy:{url:t.su.url("/admin/openvpn?form=config")}}),t.su.storeManager.define("serviceTypeStore",{type:"store",fields:[{name:"value"},{name:"boxlabel"}],data:[{value:"udp",boxlabel:t.su.CHAR.VPN_SERVER_OPENVPN.UDP},{value:"tcp",boxlabel:t.su.CHAR.VPN_SERVER_OPENVPN.TCP}]}),t.su.storeManager.define("accessStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"selected"}],data:[{value:"internet",selected:!0,name:t.su.CHAR.VPN_SERVER_OPENVPN.INTERNET_N_HOME},{value:"home",name:t.su.CHAR.VPN_SERVER_OPENVPN.HOME_ONLY}]}),t.su.storeManager.define("wanStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"selected"}],convert:function(e){var n=[];if(e&&1<e.length){n.push({value:"all",selected:!0,name:t.su.CHAR.VPN_SERVER_OPENVPN.ALL_UPPER});for(var a=0;a<e.length;a++)n.push({value:e[a].wan_port,name:t.su.CHAR.VPN_SERVER_OPENVPN.WAN+" "+e[a].wan_port.slice(3)})}return n},proxy:{url:"./data/wan.json"}}),t.su.define("openVpnGenerateCertificateProxy",{extend:"IPFProxy",url:t.su.url("/admin/openvpn?form=openvpn_cert"),preventSuccessEvent:!0,writeFilter:function(e){return t.extend({},{operation:"generate"},e)}}),t.su.define("openVpnCheckCertificateProxy",{extend:"IPFProxy",url:t.su.url("/admin/openvpn?form=openvpn_cert"),preventSuccessEvent:!0,readFilter:function(e){var n={};return n.certStatus=e.data.cert_status,n},writeFilter:function(e){return t.extend({},{operation:"check"},e)}}),t.su.define("openVpnExportProxy",{extend:"IPFProxy",api:{upload:{url:t.su.url("/admin/openvpn?form=export"),preventSuccessEvent:!0,writeFilter:function(e){return t.extend({operation:"backup"},e)}}}})}(jQuery);