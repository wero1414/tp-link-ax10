!function(o){o.su.moduleManager.define("mapMesh",{services:["timer"],deps:["networkMap","navigatorController"],models:[],stores:["meshSatellitesStore"],views:["mapMeshView"],listeners:{ev_on_launch:function(t,e,n,i,s,a,o){e.getClients()}},init:function(n,t,e,i,s,a){this.configViews({id:"mapMeshView",items:[{id:"connected-mesh-grid",configs:{columns:[{text:o.su.CHAR.ONE_MESH.DEVICE_INFO,dataIndex:"deviceType",width:280,cls:"m-hide-label s-hide-label",renderer:function(t,e){return'<div class="device-info-container">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="device-type-container widget-container inline-block">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="icon icon-%DEVICE% %OFFLINE%"></span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="info-container inline-block">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p class="device-name">%NAME%</p>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p class="device-mac">%MAC%</p>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>'.replace("%DEVICE%",t).replace("%NAME%",e.name).replace("%MAC%",e.mac).replace("%OFFLINE%","disconnected"===e.status?"offline":"")}},{text:o.su.CHAR.NETWORK_MAP.IP_ADDRESS,dataIndex:"ip"},{text:o.su.CHAR.ONE_MESH.LOCATION,dataIndex:"location",renderer:function(t){return t=t.toUpperCase(),o.su.CHAR.ONE_MESH[t]||o.su.CHAR.ONE_MESH.OTHER}},{text:o.su.CHAR.ONE_MESH.CLIENTS,dataIndex:"clientNum"},{text:o.su.CHAR.EASY_MESH.CONNECTION,dataIndex:"signal",renderer:function(t,e){return n.formatConnection("disconnected"===e.status,e.isWired,t,e.mac)}}]}},{id:"offline-notes",items:[o.su.CHAR.EASY_MESH.OFFLINE_1,o.su.CHAR.EASY_MESH.OFFLINE_2,o.su.CHAR.EASY_MESH.OFFLINE_3,o.su.CHAR.EASY_MESH.OFFLINE_4].map(function(t){return{text:t}})}]}),this.control({"#to-easy-mesh":{ev_button_click:function(){s.navigatorController.goTo("easyMesh")}},"#connected-mesh-grid => a.btn-offline":{click:n.showOfflineMsg}})}},function(s,e,t,n,i,a){return{getClients:function(){a.timer.setInterval(s,function(){"mesh"==i.networkMap.getCurrentModule()&&s.loadMeshClientStore({success:function(t){i.networkMap.trigger("ev_mesh_number_changed",t.length),s.checkLength(t.length)}})},10007,!0)},loadMeshClientStore:function(t){n.meshSatellitesStore.load({data:{operation:"read"},success:(t=t||{}).success,fail:t.fail,error:t.error})},checkLength:function(t){0==t?(e.mapMeshView.meshGrid.hide(),e.mapMeshView.meshTips.show()):(e.mapMeshView.meshGrid.show(),e.mapMeshView.meshTips.hide())},formatConnection:function(t,e,n,i){return t?'<a href="javascript:void(0)" class="btn-offline">'+o.su.CHAR.EASY_MESH.OFFLINE+"</a>":e?'<span class="icon mesh-connection icon-port"></span>':s.formatOnlineSignal(n,i)},formatOnlineSignal:function(t,e){var n="",i="";return(t=parseInt(t))<=2&&(n=o.su.CHAR.EASY_MESH.POOR_SIGNAL,i="signal-pointer"),'<div class="signal-level-container"><span class="icon icon-signal-%STRENGTH% %CLS%" data-tip="%TIP%" data-key="%KEY%" data-pointer="right"  tip-max-width="160px"></span></div>'.replace("%STRENGTH%",t).replace("%TIP%",n).replace("%CLS%",i).replace("%KEY%",e)},showOfflineMsg:function(){e.mapMeshView.meshOfflineMsg.show()}}})}(jQuery);